import{Q as nt,a as dt,b as ft,c as le,d as _e,e as Vt,f as Ee,g as ll,h as pe,i as ze,j as Ae,k as qt,l as Ze,m as al,n as rl,o as nl,p as et,q as Bt,r as ol,s as tt,t as il,u as lt,v as Ge,w as De,x as Qe,y as Tt,z as Be,A as Oe,B as Pe,C as ct,D as vt,E as Xe,F as jt,G as sl,H as ul,I as dl,J as cl,K as fl,L as vl,M as ml,N as pl,O as bt,P as yl,R as kt,S as Ve,T as He,U as gl,V as hl,W as at,X as xt,Y as bl,Z as kl,_ as xl,$ as Ft,a0 as zt,a1 as Nt,a2 as Lt,a3 as _l,a4 as $l}from"./quasar-1667444995347.js";import{i as ne,a as E,d as we,g as ee,b as mt,p as Ie,u as Qt,c as Ot,r as rt,e as Mt,f as Ut}from"./src-1667444995347.js";import{i as be,r as T,a as Fe,c as y,u as At,w as oe,t as se,b as wl,o as v,d as U,e as i,f as p,n as $e,g as n,h as Me,j as ue,k as R,m as K,l as ke,p as je,q as X,s as Z,v as fe,x as Y,y as he,z as Pt,A as qe,B as P,C as Sl,D as xe,F as ie,E as de,G as Rt,T as Cl,H as Re,I as pt,J as Vl,K as ye,L as ql,M as We,N as Je}from"./@vue-1667444995347.js";import{L as _t}from"./zrender-1667444995347.js";import{i as Bl}from"./echarts-1667444995347.js";var Dt=(e,l)=>{const t=e.__vccOpts||e;for(const[r,u]of l)t[r]=u;return t};const Tl={class:"text-h6 text-weight-medium text-primary"},Ht={__name:"QModal",props:{loading:Boolean,fullScreen:Boolean,modelValue:Boolean,persistent:{type:Boolean,default:!0}},emits:["confirm","update:modelValue","update:loading"],setup(e,{emit:l}){const t=e,r=be("BgToColor"),u=be("isDense",!0),o=T(!1),a=T(!1),d=Fe({"fab-mini":!0,round:!0,flat:!0}),m=y(()=>g.value?{icon:"fullscreen_exit",text:ne.t("ExitFullScreen")}:{icon:"crop_free",text:ne.t("FullScreen")}),S=At(),k=y(()=>t.fullScreen||g.value?!1:!S.position),F=y(()=>S.btnAlign||"right"),C=y(()=>t.persistent===!1||!!S.position),z=y(()=>{const{fullWidth:M,fullHeight:s,position:j}=S;return{class:"q-modal",fullWidth:M,fullHeight:s||["left","right"].includes(j),persistent:!0,position:j,maximized:t.fullScreen||g.value}}),h=y(()=>{if(t.fullScreen||g.value)return{};let M="";return S.width&&(M=String(S.width).endsWith("%")?S.width:S.width+"px"),S.position?{width:M||"560px"}:{width:M||"45%"}}),g=T(!1),b=()=>{g.value=!g.value},B=y(()=>{let M=81;return(t.fullScreen||g.value)&&(M-=48),(E(S.menuBtn)||S.menuBtn)&&(M+=50),`calc(100vh - ${M}px)`}),V=()=>{t.modelValue!==o.value&&(o.value=t.modelValue)};oe(se(t,"modelValue"),()=>V()),oe(se(t,"loading"),M=>a.value=M,{immediate:!0});const Q=()=>{o.value=!1,a.value=!1,l("update:loading",!1),l("update:modelValue",!1)},L=()=>{a.value=!0,l("confirm",Q)},O=()=>"",N=(M="")=>{const s=S.onBeforeClose||S.beforeClose;if(M==="close"){s&&s(O),he(()=>Q());return}t.loading||a.value||(s?s(Q):Q())};return(M,s)=>{const j=wl("drag");return v(),U(qt,K({ref:"QModal",modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=D=>o.value=D)},n(z),{onShake:s[3]||(s[3]=D=>n(C)&&N()),onEscapeKey:s[4]||(s[4]=D=>n(C)&&N())}),{default:i(()=>[p(nt,{style:$e(n(h))},{default:i(()=>[Me((v(),U(dt,null,{default:i(()=>[ue("span",Tl,R(n(S).header),1),p(ft),!e.fullScreen&&!n(S).position?(v(),U(le,K({key:0,dense:n(u),icon:n(m).icon},d,{onClick:b}),{default:i(()=>[p(_e,ke(je(M.$tooltipAttr)),{default:i(()=>[X(R(n(m).text),1)]),_:1},16)]),_:1},16,["dense","icon"])):Z("",!0),n(S).closeBtn!==!1?(v(),U(le,K({key:1,dense:n(u),class:"q-btn-close",icon:"close"},d,{onClick:s[0]||(s[0]=D=>N("close"))}),{default:i(()=>[p(_e,ke(je(M.$tooltipAttr)),{default:i(()=>[X(R(M.$t("Close")),1)]),_:1},16)]),_:1},16,["dense"])):Z("",!0)]),_:1})),[[j,n(k)]]),p(Vt,{class:fe([n(S).contentClass,"scroll"]),style:$e({maxHeight:n(B)})},{default:i(()=>[Y(M.$slots,"default")]),_:3},8,["class","style"]),p(Ee),n(S).menuBtn!==!1?(v(),U(ll,{key:0,align:n(F)},{default:i(()=>[Y(M.$slots,"menuLeft"),n(S).submitBtn!==!1?(v(),U(le,{key:0,loading:a.value,"text-color":n(r)("primary"),color:"primary",glossy:"","no-wrap":"",padding:".4em 1em",onClick:L},{default:i(()=>[p(pe,{class:"on-left",name:"published_with_changes"}),X(" "+R(n(S).submitText||M.$t("Confirm")),1)]),_:1},8,["loading","text-color"])):Z("",!0),n(S).closeBtn!==!1?(v(),U(le,{key:1,loading:a.value,"text-color":n(r)("negative"),color:"negative",glossy:"","no-wrap":"",padding:".4em 1em",onClick:s[1]||(s[1]=D=>N("close"))},{default:i(()=>[p(pe,{class:"on-left",name:"cancel_schedule_send"}),X(" "+R(n(S).closeText||M.$t("Close")),1)]),_:1},8,["loading","text-color"])):Z("",!0),Y(M.$slots,"menuRight")]),_:3},8,["align"])):Z("",!0),p(ze,{showing:a.value},{default:i(()=>[p(Ae,{color:"primary",size:"50px"})]),_:1},8,["showing"])]),_:3},8,["style"])]),_:3},16,["modelValue"])}}};var jl=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));function Fl(e={}){if(e.component)return e.component;const{type:l}=e;return E(l)?Ze:l==="select"?"qx-select":["date","datetime","daterange"].includes(l)?"qx-date":["time"].includes(l)?"qx-time":l==="number"?"q-number":["radio","checkbox","toggle"].includes(l)?"q-group":["year","yearrange"].includes(l)?"q-year":["month","monthrange"].includes(l)?"q-month":l==="tree"?"q-select-tree":l==="icon"?"qx-icon":l==="editor"?"qx-editor":l==="file"?"qx-file":l==="picture"?"q-picture":l==="btnToggle"?al:l==="range"?rl:l==="slider"?nl:Ze}const zl=/width.*?%;/g;function Nl(e={},l,t){const{type:r="input"}=e,u=we(e);if(["select"].includes(r)&&typeof e.options=="function"&&(u.options=e.options(l)),u.inline=!0,u.outlined=!0,u.lazyRules=e.lazyRules||!0,u.rules=Ll(e),u.placeholder=Et(e),l&&(u.rowInfo=l),t&&delete u.maxlength,r==="textarea"&&(u.autogrow=!0),u.maxlength&&(u.counter=!0),u.component||delete u.required,u.style){const a=u.style.split(";").find(d=>d.startsWith("width:"));a&&a.endsWith("%")&&(u.style=u.style.replace(zl,""))}return delete u.component,delete u.formslot,delete u.label,delete u.value,delete u.name,delete u.slot,u}function Ll(e={}){const l=e.rules||[];return e.required&&l.unshift(t=>!E(t)||`${Et(e)}`),l}const Ql=["input","editor","number","textarea","password","",void 0,null];function Et(e={}){return Ql.includes(e.type)?`${ne.t("PleaseInput")}${e.label||""}`:`${ne.t("PleaseSelect")}${e.label||""}`}const Ol={key:0,class:"text-red text-weight-bold q-pr-xs"},Ml={__name:"FormItem",props:{column:{type:Object,default:()=>({})},dense:{type:Boolean,default:!0},loading:Boolean,readonly:Boolean,isSearch:Boolean,formWidth:Number,modelValue:Object,labelPosition:String,span:[String,Number],labelWidth:[String,Number]},setup(e){const l=e;Pt(g=>({"5a5ff5ac":`${n(k)}`}));const t=y(()=>{var g;return(g=l.dense)!=null?g:be("isDense",!0)}),r=y(()=>{if(l.isSearch)return l.span||3;if(!l.formWidth)return l.span||6;if(l.span)return[12,"12"].includes(l.span)&&l.formWidth>2e3?6:l.span;let g=1;return l.formWidth<401?g=12:l.formWidth<801?g=6:l.formWidth<1201?g=4:l.formWidth<1601?g=3:l.formWidth<2001&&(g=2),l.span>g?l.span:g}),u=y(()=>!l.isSearch&&l.formWidth&&l.formWidth/12*r.value<301?!0:l.labelPosition==="top"),o=y(()=>{let g="qx-form-item items-start";return u.value||(g+=" row"),`${g} col-${r.value}`}),a=y(()=>{let g="q-pr-sm row items-center text-right";return t.value?g+=" qx-form-item-label-dense":g+=" qx-form-item-label",u.value?g+=" qx-form-item-label-top":l.labelPosition==="left"?g+=" justify-start":g+=" justify-end",g}),d=Object.keys(qe()),m=y(()=>g=>d.includes(g)),S=y(()=>!["0",0].includes(l.labelWidth)),k=y(()=>u.value||!S.value?"100%":`${l.labelWidth||80}px`),F=y(()=>{const g=Nl(l.column,z.value,l.isSearch);return l.readonly&&(delete g.counter,delete g.maxlength),g}),C=y(()=>Fl(l.column)),z=T({}),h=(g,b)=>{if(z.value=l.modelValue||{},E(l.column))return;const{field:B}=l.column;if(b&&z.value[B]===b){z.value[B]=g;return}z.value[B]||E(l.column.value)||(z.value[B]=l.column.value)};return oe(()=>{var g;return(g=l.column)==null?void 0:g.value},(g,b)=>h(g,b)),oe(se(l,"modelValue"),()=>h(),{immediate:!0}),(g,b)=>(v(),P("div",{class:fe(n(o))},[n(S)?(v(),P("div",{key:0,class:fe([n(a),"form-item-label-width"])},[ue("span",{class:fe(n(u)?"ellipsis":"ellipsis-2-lines")},[e.column.required?(v(),P("i",Ol,"*")):Z("",!0),X(" "+R(e.column.label),1)],2)],2)):Z("",!0),p(et,{class:"qx-form-item-card"},{default:i(()=>[e.column.formslot?Y(g.$slots,e.column.field,{key:0,attrs:n(F)},void 0,!0):(v(),U(Sl(n(C)),K({key:1,modelValue:z.value[e.column.field],"onUpdate:modelValue":b[0]||(b[0]=B=>z.value[e.column.field]=B),dense:n(t),loading:e.loading,readonly:e.loading||e.readonly,name:""},n(F)),xe({_:2},[n(m)(`${e.column.field}B`)?{name:"before",fn:i(()=>[Y(g.$slots,e.column.field+"B",{},void 0,!0)]),key:"0"}:void 0,n(m)(`${e.column.field}A`)?{name:"after",fn:i(()=>[Y(g.$slots,e.column.field+"A",{},void 0,!0)]),key:"1"}:void 0,n(m)(`${e.column.field}P`)?{name:"prepend",fn:i(()=>[Y(g.$slots,e.column.field+"P",{},void 0,!0)]),key:"2"}:void 0,n(m)(`${e.column.field}AP`)?{name:"append",fn:i(()=>[Y(g.$slots,e.column.field+"AP",{},void 0,!0)]),key:"3"}:void 0]),1040,["modelValue","dense","loading","readonly"]))]),_:3})],2))}};var $t=Dt(Ml,[["__scopeId","data-v-50a9bf04"]]);const Ul={__name:"QxForm",props:{modelValue:Object,isSearch:Boolean,option:{type:Object,default:()=>({})},dense:{type:Boolean,default:!0}},emits:["submit","update:modelValue"],setup(e,{expose:l,emit:t}){const r=e,u=be("BgToColor"),o=y(()=>{var s;return(s=r.dense)!=null?s:be("isDense",!0)}),a=T(null),d=T(!1),m=y(()=>s=>(s==null?void 0:s.label)+(s==null?void 0:s.field)),S=y(()=>(s=[])=>s.filter(j=>r.isSearch?j.search!==!1:j.display!==!1)),k=y(()=>(s={})=>{const{labelPosition:j,labelWidth:D,searchLabelWidth:I,span:x,searchSpan:W,readonly:c}=r.option||{};if(r.isSearch){const _=E(s.searchLabelWidth)?I:s.searchLabelWidth;return{loading:d.value,labelPosition:"right",readonly:s.searchReadonly,span:s.searchSpan||W,labelWidth:E(_)?s.labelWidth||D:_}}return{loading:d.value,span:s.span||x,labelPosition:s.labelPosition||j,readonly:E(s.readonly)?c:s.readonly,labelWidth:E(s.labelWidth)?D:s.labelWidth}}),F=y(()=>(s={})=>(s={...s},r.isSearch&&(s.searchType&&(s.type=s.searchType),delete s.hint,delete s.value,delete s.required,s.searchHint&&(s.hint=s.searchHint),s.searchValue&&(s.value=s.searchValue),s.searchRequired&&(s.required=s.searchRequired)),delete s.children,delete s.searchHint,delete s.searchType,delete s.searchValue,delete s.searchRequired,s)),C=Object.keys(qe()),z=y(()=>s=>C.filter(j=>[s,`${s}A`,`${s}B`,`${s}P`,`${s}AP`].includes(j))),h=y(()=>{const{menuBtn:s,searchMenuBtn:j=!0}=r.option||{};return r.isSearch?j:s}),g=y(()=>{let s;return o.value?s="qx-form-menu-dense":s="qx-form-menu",r.isSearch?(r.option&&r.option.searchMenu&&(s+=` col-${r.option.searchMenu}`),r.option&&r.option.searchMenuPosition&&(s+=` text-${r.option.searchMenuPosition}`),s):(r.option&&r.option.menuSpan?s+=` col-${r.option.menuSpan} q-pl-md`:s+=" col-12 q-pr-sm",r.option&&r.option.menuPosition?s+=` text-${r.option.menuPosition}`:s+=" text-center",s)}),b=T(0),B=s=>{b.value=s.width},V=T({}),Q=()=>{a.value&&a.value.resetValidation(),V.value=r.modelValue||{}};oe(se(r,"modelValue"),()=>Q(),{immediate:!0});const L=()=>{a.value&&a.value.resetValidation(),V.value={},t("update:modelValue",V.value)},O=()=>{d.value=!1},N=(s,j)=>{a.value.validate().then(D=>{D?s&&(d.value=!0,s(V.value,O)):j&&j()})},M=()=>{d.value=!0,t("submit",V.value,O)};return l({onReset:L,validate:N}),(s,j)=>(v(),P(ie,null,[p(ol,{ref_key:"QxForm",ref:a,class:fe([e.isSearch?"qx-form-search":"qx-form-normal","qx-form full-width row q-col-gutter-sm items-start rounded-borders"]),onReset:L,onSubmit:M},{default:i(()=>[b.value>0||e.isSearch?(v(),P(ie,{key:0},[(v(!0),P(ie,null,de(n(S)(e.option.column),(D,I)=>(v(),P(ie,{key:n(m)(D)},[D.children?(v(),U(Bt,{key:0,disable:d.value,group:`group-${I}`,label:D.label,class:"full-width non-selectable","default-opened":"","rounded-borders":"","switch-toggle-side":""},{default:i(()=>[p(nt,{class:"row"},{default:i(()=>[(v(!0),P(ie,null,de(n(S)(D.children),x=>(v(),U($t,K({key:n(m)(x),modelValue:V.value,"onUpdate:modelValue":j[0]||(j[0]=W=>V.value=W),column:n(F)(x),dense:n(o),formWidth:b.value,isSearch:e.isSearch},n(k)(s.cCoumn)),xe({_:2},[de(n(z)(x.field),W=>({name:W,fn:i(({attrs:c})=>[Y(s.$slots,W,{attrs:c})])}))]),1040,["modelValue","column","dense","formWidth","isSearch"]))),128))]),_:2},1024)]),_:2},1032,["disable","group","label"])):(v(),U($t,K({key:1,modelValue:V.value,"onUpdate:modelValue":j[1]||(j[1]=x=>V.value=x),column:n(F)(D),dense:n(o),formWidth:b.value,isSearch:e.isSearch},n(k)(D)),xe({_:2},[de(n(z)(D.field),x=>({name:x,fn:i(({attrs:W})=>[Y(s.$slots,x,{attrs:W})])}))]),1040,["modelValue","column","dense","formWidth","isSearch"]))],64))),128)),n(h)?(v(),P("div",{key:0,class:fe(n(g))},[p(le,{loading:d.value,"text-color":n(u)("primary"),class:"q-ml-sm",color:"primary","no-wrap":"",type:"submit"},{default:i(()=>[e.isSearch?(v(),P(ie,{key:0},[p(pe,{class:"on-left",name:"search"}),X(" "+R(e.option.searchText||s.$t("Search")),1)],64)):(v(),P(ie,{key:1},[p(pe,{class:"on-left",name:"published_with_changes"}),X(" "+R(e.option.submitText||s.$t("Submit")),1)],64))]),_:1},8,["loading","text-color"]),e.option.resetBtn!==!1?(v(),U(le,{key:0,loading:d.value,"text-color":n(u)("negative"),color:"negative","no-wrap":"",type:"reset"},{default:i(()=>[p(pe,{class:"on-left",name:"restore"}),X(" "+R(e.option.resetText||s.$t("Reset")),1)]),_:1},8,["loading","text-color"])):Z("",!0),Y(s.$slots,"menuRight",{loading:d.value})],2)):Z("",!0)],64)):Z("",!0)]),_:3},8,["class"]),e.isSearch?Z("",!0):(v(),U(tt,{key:0,debounce:"1000",onResize:B}))],64))}};var Al=Object.freeze(Object.defineProperty({__proto__:null,default:Ul},Symbol.toStringTag,{value:"Module"}));const Pl={class:"text-h6 text-weight-medium text-primary"},Rl={__name:"QxPage",props:{loading:Boolean,showMenu:{type:Boolean,default:!0},modelValue:Boolean},emits:["confirm","update:modelValue","update:loading"],setup(e,{emit:l}){const t=e,r=At(),u=be("BgToColor"),o=be("isDense",!0),a=T(!1),d=T(!1),m=T(!1),S=y(()=>{let h=40;return t.showMenu&&(h+=40),`calc(100% - ${h}px)`});oe(se(t,"modelValue"),h=>{h&&!a.value&&(a.value=h),d.value=h}),oe(se(t,"loading"),h=>{m.value=h},{immediate:!0});const k=Fe({"fab-mini":!0,round:!0,flat:!0}),F=h=>{h===!0&&z(),m.value=!1,l("update:loading",!1)},C=()=>{m.value=!0,l("confirm",F)},z=()=>{const h=r.onBeforeClose||r.beforeClose;h&&typeof h=="function"?h():(d.value=!1,l("update:modelValue",!1))};return(h,g)=>(v(),U(Cl,{name:"q-transition--scale"},{default:i(()=>[a.value?Me((v(),U(nt,{class:"qx-page",key:"email-button"},{default:i(()=>[p(dt,{class:"glossy qx-page-header"},{default:i(()=>[ue("span",Pl,R(n(r).header),1),p(ft),n(r).closeBtn!==!1?(v(),U(le,K({key:0,dense:n(o)},k,{icon:"reply_all",onClick:z}),{default:i(()=>[p(_e,ke(je(h.$tooltipAttr)),{default:i(()=>[X(R(h.$t("Close")),1)]),_:1},16)]),_:1},16,["dense"])):Z("",!0)]),_:1}),ue("div",{style:$e({height:n(S)}),class:"qx-page-content"},[Y(h.$slots,"default")],4),e.showMenu?(v(),U(dt,{key:0,class:"qx-page-footer glossy rounded-borders flex-center"},{default:i(()=>[Y(h.$slots,"menuLeft"),n(r).submitBtn!==!1?(v(),U(le,{key:0,"no-wrap":"",glossy:"",color:"primary","text-color":n(u)("primary"),onClick:C,loading:m.value,padding:".7em 1.5em"},{default:i(()=>[p(pe,{class:"on-left",name:"published_with_changes"}),X(" "+R(n(r).submitText||h.$t("Confirm")),1)]),_:1},8,["text-color","loading"])):Z("",!0),n(r).closeBtn!==!1?(v(),U(le,{key:1,"no-wrap":"",glossy:"",color:"negative","text-color":n(u)("negative"),onClick:z,loading:m.value,padding:".7em 1.5em"},{default:i(()=>[p(pe,{class:"on-left",name:"cancel_schedule_send"}),X(" "+R(n(r).closeText||h.$t("Close")),1)]),_:1},8,["text-color","loading"])):Z("",!0),Y(h.$slots,"menuRight")]),_:3})):Z("",!0),p(ze,{showing:m.value},{default:i(()=>[p(Ae,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:3},512)),[[Rt,d.value]]):Z("",!0)]),_:3}))}};var Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Rl},Symbol.toStringTag,{value:"Module"}));function It(e="left",l=[],t=0){var a;const r=[];let u=0;const o=l.length;for(u;u<o&&!l[u].hide;u++){const d=l[u];if(d.required=d.showColumn,["index","menu"].includes(d.name)||(d.name=`${d.field}$$${t}-${u}`),d.align=d.align||e,d.style=d.style||"",d.headerStyle=d.headerStyle||"",d.width){const m=isNaN(Number(d.width))?d.width:`${d.width}px`;d.style+=`width: ${m}; `,d.headerStyle+=`width: ${m}; `,delete d.width}if(d.minWidth){const m=isNaN(Number(d.minWidth))?d.minWidth:`${d.minWidth}px`;d.style+=`min-width: ${m};`,d.headerStyle+=`min-width: ${m};`,delete d.minWidth}(a=d==null?void 0:d.children)!=null&&a.length?r.push.apply(r,It(e,d.children,t+1)):r.push(d)}return r}const Wt=(e,l="children")=>{const t=[];return e.forEach(r=>{var u;r.hide||(t.push(r),(u=r[l])!=null&&u.length&&t.push.apply(t,Wt(r[l])))}),t};function Hl(e=[]){let l=1;const t=(o,a)=>{if(a&&(o.level=a.level+1,l<o.level&&(l=o.level)),o.children){let d=0;o.children.forEach(m=>{m.hide||(t(m,o),d+=m.colSpan)}),o.colSpan=d}else o.colSpan=1};e.forEach(o=>{o.hide||(o.level=1,t(o))});const r=[];for(let o=0;o<l;o++)r.push([]);return Wt(e).forEach(o=>{o.children?o.rowSpan=1:o.rowSpan=l-o.level+1,r[o.level-1].push(o)}),r}function Te(e={}){if(E(e.value))return"";if(ee(e.options)!=="array")return e.value;const l=e.props||{};if(e.multiple){const r=e.value.split(",");let u=e.options.filter(o=>ee(o)==="object"?r.includes(o[l.value||"value"]):r.includes(o));return u=u.map(o=>ee(o)==="object"?o[l.label||"label"]:o),u.join(", ")||e.value}const t=e.options.find(r=>ee(r)==="object"?e.value===r[l.value||"value"]:e.value===r);return ee(t)==="object"?t[l.label||"label"]:t||e.value}function Kt(e="",l={}){return typeof e=="function"?e(l):e}const El={class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},Il={class:""},Wl={class:"table-menu"},Kl={key:1},Yl={__name:"TableGrid",props:{props:Object,selection:String,rowClick:Function,cellClick:Function,headerClick:Function,headerCellClick:Function,rowCls:[String,Function]},setup(e){const l=e,t=be("isDark",!1),r=y(()=>{const{cols:k}=l.props||{};return k.filter(F=>!["index","menu"].includes(F.name))}),u=y(()=>(k={})=>!k.tagColors||E(k.value)?"primary":k.tagColors[k.value]||"primary"),o=k=>{if(k.headerClick)return k.headerClick(k);if(l.headerCellClick)return l.headerCellClick(k);if(l.headerClick)return l.headerClick(l.props,k)},a=y(()=>k=>{if(k.headerClick||l.headerCellClick)return"cursor-pointer text-primary";if(l.headerClick)return"cursor-pointer"}),d=k=>{const{row:F}=l.props||{};if(k.cellClick)return k.cellClick(F);if(l.cellClick)return l.cellClick(F);if(l.rowClick)return l.rowClick(F)},m=Fe({"text-subtitle1":!0,"text-capitalize":!0}),S=y(()=>k=>{if(k.cellClick||l.cellClick)return"cursor-pointer text-primary";if(l.rowClick)return"cursor-pointer"});return(k,F)=>(v(),P("div",El,[p(nt,{class:fe(e.props.selected?n(t)?"bg-grey-9":"bg-grey-2":"")},{default:i(()=>[p(Vt,{class:"row justify-between items-center"},{default:i(()=>[ue("div",Il,[p(pe,{class:"q-mr-sm"},{default:i(()=>[X(R(e.props.rowIndex+1),1)]),_:1}),e.selection?Y(k.$slots,"selection",{key:0,props:e.props}):Z("",!0)]),ue("div",Wl,[Y(k.$slots,"menu")])]),_:3}),p(Ee),p(il,{class:fe(n(Kt)(e.rowCls,e.props)),dense:""},{default:i(()=>[(v(!0),P(ie,null,de(n(r),C=>(v(),P(ie,{key:C.name},[p(lt,{class:fe(n(a)(C)),onClick:z=>o(C)},{default:i(()=>[C.headerSlot?(v(),P("span",{key:0,class:fe(m)},[Y(k.$slots,C.field+"H",{row:C})],2)):(v(),P("span",{key:1,class:fe(m)},R(C.label),3))]),_:2},1032,["class","onClick"]),p(lt,{class:fe(n(S)(C)),caption:"",onClick:z=>d(C)},{default:i(()=>[C.slot?Y(k.$slots,C.field,{key:0}):(v(),P(ie,{key:1},[C.useTag?(v(),U(Ge,{key:0,color:n(u)(C),outline:"",square:"","text-color":"white"},{default:i(()=>[X(R(n(Te)(C)),1)]),_:2},1032,["color"])):(v(),P("span",Kl,R(n(Te)(C)),1))],64))]),_:2},1032,["class","onClick"])],64))),128))]),_:3},8,["class"])]),_:3},8,["class"])]))}},Ce={__name:"QxTooltip",props:{mask:String,rowsNum:{type:[Number,String],default:1},modelValue:[String,Number,Date,Array,Object]},setup(e){const l=e,t=T(!0),r=a=>l.mask?De.formatDate(a,l.mask):a,u=y(()=>{let a="";const d=qe().default;if(d&&d())for(const m of d())a+=m.children;return E(a)&&(a=l.modelValue||""),r(a)}),o=a=>{const d=a.target||a,m=d.scrollHeight>d.clientHeight+2,S=d.scrollWidth>d.clientWidth;if(m||S){t.value=!0;return}t.value=!1};return(a,d)=>(v(),P("span",{style:$e({"-webkit-line-clamp":e.rowsNum}),class:"multiRow_5",onMouseenter:o},[X(R(n(u))+" ",1),t.value?(v(),U(_e,ke(K({key:0},a.$tooltipAttr)),{default:i(()=>[X(R(n(u)),1)]),_:1},16)):Z("",!0)],36))}};var Gl=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));const Xl={key:0},Jl={key:1},Zl={key:0},ea={key:1},ta={key:0},la={key:1},aa={__name:"TableTd",props:{props:Object,fixedObj:Object,selection:String,rowClick:Function,cellClick:Function,rowCls:[String,Function]},setup(e){const l=e,t="qx-fixed-column-td-",r=T(null),u=y(()=>{const{cols:h}=l.props||{};return h.filter(g=>!["index","menu"].includes(g.name)&&g.fixed==="left")}),o=y(()=>{const{cols:h}=l.props||{};return h.filter(g=>!["index","menu"].includes(g.name)&&!g.fixed)}),a=y(()=>{const{cols:h}=l.props||{};return h.filter(g=>!["index","menu"].includes(g.name)&&g.fixed==="right")}),d=y(()=>(h={})=>{var b;const g=(b=l.fixedObj)==null?void 0:b[h.name];if(g)return{left:g}}),m=y(()=>(h={})=>{var b;const g=(b=l.fixedObj)==null?void 0:b[h.name];if(g)return{right:g}}),S=y(()=>(h={})=>!h.tagColors||E(h.value)?"primary":h.tagColors[h.value]||"primary"),k=h=>{const{row:g}=l.props||{};if(h.cellClick)return h.cellClick(g);if(l.cellClick)return l.cellClick(g)},F=y(()=>h=>{let g="";return h.fixed&&(g=`${t}${h.name} `),h.cellClick||l.cellClick?g+"cursor-pointer text-primary":l.rowClick?g+"cursor-pointer":h.className?g+" "+h.className:g}),C=be("isDense",!0),z=y(()=>C.value?l.selection?"36px":0:l.selection?"52px":0);return(h,g)=>(v(),U(Tt,{ref_key:"TableTD",ref:r,class:fe(n(Kt)(e.rowCls,e.props)),props:e.props,onClick:g[0]||(g[0]=b=>e.rowClick&&e.rowClick(e.props))},{default:i(()=>[e.selection?(v(),U(Qe,{key:0,class:"qx-table--selection-td"},{default:i(()=>[Y(h.$slots,"selection",{props:e.props})]),_:3})):Z("",!0),p(Qe,{key:"index",props:e.props,style:$e({left:n(z)}),class:"qx-table--index-td"},{default:i(()=>[X(R(e.props.rowIndex+1),1)]),_:1},8,["props","style"]),(v(!0),P(ie,null,de(n(u),b=>(v(),U(Qe,{key:b.name,class:fe(n(F)(b)),props:e.props,style:$e(n(d)(b)),onClick:B=>k(b)},{default:i(()=>[b.slot?(v(),P("div",Xl,[Y(h.$slots,b.field)])):(v(),P("div",Jl,[b.useTag?(v(),U(Ge,{key:0,color:n(S)(b),outline:"",square:"","text-color":"white"},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["color"])):(v(),U(Ce,{key:1,rowsNum:b.rowsNum||3},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["rowsNum"]))]))]),_:2},1032,["class","props","style","onClick"]))),128)),(v(!0),P(ie,null,de(n(o),b=>(v(),U(Qe,{key:b.name,class:fe(n(F)(b)),props:e.props,onClick:B=>k(b)},{default:i(()=>[b.slot?(v(),P("div",Zl,[Y(h.$slots,b.field)])):(v(),P("div",ea,[b.useTag?(v(),U(Ge,{key:0,color:n(S)(b),outline:"",square:"","text-color":"white"},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["color"])):(v(),U(Ce,{key:1,rowsNum:b.rowsNum||3},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["rowsNum"]))]))]),_:2},1032,["class","props","onClick"]))),128)),(v(!0),P(ie,null,de(n(a),b=>(v(),U(Qe,{key:b.name,class:fe(n(F)(b)),props:e.props,style:$e(n(m)(b)),onClick:B=>k(b)},{default:i(()=>[b.slot?(v(),P("div",ta,[Y(h.$slots,b.field)])):(v(),P("div",la,[b.useTag?(v(),U(Ge,{key:0,color:n(S)(b),outline:"",square:"","text-color":"white"},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["color"])):(v(),U(Ce,{key:1,rowsNum:b.rowsNum||3},{default:i(()=>[X(R(n(Te)(b)),1)]),_:2},1032,["rowsNum"]))]))]),_:2},1032,["class","props","style","onClick"]))),128)),p(Qe,{key:"menu",props:e.props,class:"qx-table--menu-td"},{default:i(()=>[Y(h.$slots,"menu")]),_:3},8,["props"])]),_:3},8,["class","props"]))}},ra={__name:"TableTh",props:{index:Number,props:Object,columns:Array,fixedObj:Object,selection:String,headerClick:Function,headerCellClick:Function},setup(e){const l=e,t="qx-fixed-column-",r=be("isDense",!0),u=T(null),o=T({}),a=()=>{o.value=l.fixedObj||{}};oe(se(l,"fixedObj"),()=>{a()},{immediate:!0});const d=y(()=>l.index===0),m=y(()=>r.value?l.selection?"36px":0:l.selection?"52px":0),S=y(()=>(l.columns||[]).filter(N=>!["index","menu"].includes(N.name)&&N.fixed==="left")),k=y(()=>(l.columns||[]).filter(N=>!["index","menu"].includes(N.name)&&!N.fixed)),F=y(()=>(l.columns||[]).filter(N=>!["index","menu"].includes(N.name)&&N.fixed==="right")),C=y(()=>{if(!u.value)return{left:0};const N=u.value.$el.querySelector(".qx-table--index");return N?{left:((Be.offset(N)||{}).left||0)-parseInt(Be.style(N,"left"))}:{left:0}}),z=y(()=>(N={})=>{if(o.value[N.name])return{left:o.value[N.name]};if(!u.value)return;const M=u.value.$el.querySelector(`.${t}${N.name}`);if(!M)return;const s=`${Be.offset(M).left-C.value.left}px`;return o.value[N.name]=s,{left:s}}),h=y(()=>{if(!u.value)return{width:0};const N=u.value.$el.querySelector(".qx-table--menu");return N?{width:Be.width(N)}:{width:0}}),g=y(()=>{if(!u.value)return 0;let N=h.value.width;for(const M of F.value){const s=u.value.$el.querySelector(`.${t}${M.name}`);s&&(N+=Be.width(s))}return N}),b=y(()=>{let N=0;return(M={})=>{if(o.value[M.name])return{right:o.value[M.name]};if(!u.value)return;const s=u.value.$el.querySelector(`.${t}${M.name}`);if(!s)return;N+=Be.width(s);const j=`${g.value-N}px`;return o.value[M.name]=j,{right:j}}}),B=y(()=>(l.columns||[]).find(N=>N.name==="menu")||{}),V=y(()=>N=>{if(E(N.children))return l.props}),Q=y(()=>N=>{let M="";return N.fixed&&(M=`${t}${N.name} `),N.headerClick||l.headerCellClick?M+"cursor-pointer text-primary":l.headerClick?M+"cursor-pointer":M}),L=N=>{if(N.headerClick)return N.headerClick(N);if(l.headerCellClick)return l.headerCellClick(N)},O=Fe({class:"text-subtitle1 text-capitalize"});return(N,M)=>(v(),U(Tt,{ref_key:"TableTH",ref:u,class:fe(n(d)?"":"non-first-row"),props:e.props,onClick:M[0]||(M[0]=s=>e.headerClick&&e.headerClick(e.props))},{default:i(()=>[e.selection&&n(d)?(v(),U(Oe,{key:"selection",class:"qx-table--selection",rowspan:"100%"},{default:i(()=>[e.selection==="multiple"?Y(N.$slots,"selection",{key:0,props:e.props}):Z("",!0)]),_:3})):Z("",!0),n(d)?(v(),U(Oe,{key:"index",props:e.props,style:$e({left:n(m)}),class:"qx-table--index",rowspan:"100%"},{default:i(()=>[ue("span",ke(je(O)),"#",16)]),_:1},8,["props","style"])):Z("",!0),(v(!0),P(ie,null,de(n(S),s=>(v(),U(Oe,{key:s.name,class:fe(n(Q)(s)),colSpan:s.colSpan,props:n(V)(s),rowSpan:s.rowSpan,style:$e(n(z)(s)),onClick:j=>L(s)},{default:i(()=>[s.headerSlot?(v(),P("span",ke(K({key:0},O)),[Y(N.$slots,s.field+"H",{row:s})],16)):(v(),P("span",ke(K({key:1},O)),R(s.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","style","onClick"]))),128)),(v(!0),P(ie,null,de(n(k),s=>(v(),U(Oe,{key:s.name,class:fe(n(Q)(s)),colSpan:s.colSpan,props:n(V)(s),rowSpan:s.rowSpan,onClick:j=>L(s)},{default:i(()=>[s.headerSlot?(v(),P("span",ke(K({key:0},O)),[Y(N.$slots,s.field+"H",{row:s})],16)):(v(),P("span",ke(K({key:1},O)),R(s.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","onClick"]))),128)),(v(!0),P(ie,null,de(n(F),s=>(v(),U(Oe,{key:s.name,class:fe(n(Q)(s)),colSpan:s.colSpan,props:n(V)(s),rowSpan:s.rowSpan,style:$e(n(b)(s)),onClick:j=>L(s)},{default:i(()=>[s.headerSlot?(v(),P("span",ke(K({key:0},O)),[Y(N.$slots,s.field+"H",{row:s})],16)):(v(),P("span",ke(K({key:1},O)),R(s.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","style","onClick"]))),128)),n(d)?(v(),U(Oe,{key:"menu",props:e.props,class:"qx-table--menu",rowspan:"100%"},{default:i(()=>[ue("span",ke(je(O)),R(n(B).label),17)]),_:1},8,["props"])):Z("",!0)]),_:3},8,["class","props"]))}},na={class:"full-width row justify-between"},oa={class:"q-gutter-x-sm row items-center"},ia={key:0,class:"q-gutter-x-sm row items-center"},sa={__name:"TableTop",props:{props:Object,grid:Boolean,rightBtn:{type:Boolean,default:!0},columns:{type:Array,default(){return[]}},gridBtn:Boolean,multiColumn:Array,searchBtn:Boolean,isFullscreen:Boolean,dynamicColumns:Array},emits:["refresh","update:isFullscreen","update:grid","update:dynamicColumns"],setup(e,{emit:l}){const t=e,r=be("BgToColor"),u=be("isDense",!0),o=T(!1),a=T(t.dynamicColumns||[]),d=y(()=>{var V;return((V=t.multiColumn)==null?void 0:V.length)===1});Re(()=>{o.value=!0});const m=y(()=>V=>V?"view_list":"grid_view"),S=y(()=>V=>V.inFullscreen?"fullscreen_exit":"crop_free"),k=y(()=>t.columns.filter(V=>!V.required).map(V=>({label:V.label,value:V.name}))),F={backgroundColor:"transparent",opacity:0},C=y(()=>({round:!0,dense:u.value,color:"primary",textColor:r("primary")}));pt(()=>l("update:dynamicColumns",a.value));const z=()=>{t.dynamicColumns&&(a.value=[...t.dynamicColumns])},h=()=>l("refresh"),g=()=>l("update:grid",!t.grid),b=()=>o.value=!o.value,B=V=>{l("update:isFullscreen",!t.isFullscreen),V.toggleFullscreen()};return(V,Q)=>(v(),P(ie,null,[e.searchBtn?(v(),U(Bt,{key:0,modelValue:o.value,"onUpdate:modelValue":Q[0]||(Q[0]=L=>o.value=L),class:"full-width"},{default:i(()=>[Y(V.$slots,"top")]),_:3},8,["modelValue"])):Z("",!0),ue("div",na,[ue("div",oa,[Y(V.$slots,"menuLeft")]),p(ft),e.rightBtn?(v(),P("div",ia,[Y(V.$slots,"menuRight",{btnAttr:n(C)}),p(le,K({class:"q-btn-refresh",icon:"cached"},n(C),{onClick:h}),{default:i(()=>[p(_e,K({class:"text-no-wrap"},V.$tooltipAttr),{default:i(()=>[X(R(V.$t("Refresh")),1)]),_:1},16)]),_:1},16),e.gridBtn&&!V.$q.screen.xs?(v(),U(le,K({key:0,icon:n(m)(e.grid)},n(C),{onClick:g}),{default:i(()=>[p(_e,K({class:"text-no-wrap"},V.$tooltipAttr),{default:i(()=>[X(R(e.grid?V.$t("List"):V.$t("Grid")),1)]),_:1},16)]),_:1},16,["icon"])):Z("",!0),p(le,K({icon:n(S)(e.props)},n(C),{onClick:Q[1]||(Q[1]=L=>B(e.props))}),{default:i(()=>[p(_e,K({class:"text-no-wrap"},V.$tooltipAttr),{default:i(()=>[X(R(e.props.inFullscreen?V.$t("ExitFullScreen"):V.$t("FullScreen")),1)]),_:1},16)]),_:1},16,["icon"]),e.searchBtn?(v(),U(le,K({key:1,icon:"search"},n(C),{onClick:b}),{default:i(()=>[p(_e,K({class:"text-no-wrap"},V.$tooltipAttr),{default:i(()=>[X(R(V.$t("Search")+V.$t("ShowHide")),1)]),_:1},16)]),_:1},16)):Z("",!0),n(d)?(v(),U(le,K({key:2,icon:"tune"},n(C),{onClick:z}),{default:i(()=>[p(_e,K({class:"text-no-wrap"},V.$tooltipAttr),{default:i(()=>[X(R(V.$t("Column")+V.$t("ShowHide")),1)]),_:1},16),p(Pe,{offset:[10,10],anchor:"bottom left",breakpoint:"0",class:"q-pa-md dynamic-column-popup",self:"top left","transition-hide":"jump-up","transition-show":"jump-down"},{default:i(()=>[p(ct,{"thumb-style":F,visible:!1,class:"fit"},{default:i(()=>[p(vt,{modelValue:a.value,"onUpdate:modelValue":Q[2]||(Q[2]=L=>a.value=L),options:n(k),type:"checkbox"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1},16)):Z("",!0)])):Z("",!0)])],64))}},ua={class:"full-width text-center text-italic text-body2"},da={class:"full-width text-center text-italic text-body2"},ca={class:"qx-table-bottom row justify-between"},fa={class:"row q-gutter-x-sm items-center"},va={key:0,class:"selected-tips text-subtitle2"},ma={key:0,class:"q-gutter-x-sm row items-center"},pa={class:"text-subtitle2"},Yt={__name:"QxTable",props:{data:Array,option:Object,selected:Array,loading:Boolean,rowClick:Function,cellClick:Function,formatData:Function,headerClick:Function,headerCellClick:Function,rowKey:[String,Function],rowCls:[String,Function],remoteData:[Function,Object]},emits:["update:selected","update:loading"],setup(e,{expose:l,emit:t}){const r=e,u=T(null),o=qe(),a=T(r.data||[]),d=y(()=>{const{index:H=!0,column:te=[],menu:$,menuWidth:q=80,menuText:f=ne.t("Operation")}=r.option||{},J=we(te);if(H){const A="width: 50px; min-width: 50px;";J.unshift({name:"index",label:"#",showColumn:!0,headerStyle:A,style:A,align:"center",field:"index"})}if($){const A=`width: ${q}px; min-width: ${q}px`;J.push({name:"menu",label:f,headerStyle:A,showColumn:!0,style:A,align:"center",field:"menu"})}return J}),m=T({}),S=T([]),k=y(()=>Hl(d.value)),F=y(()=>{var H;return It((H=r.option)==null?void 0:H.align,d.value)}),C=T(!1),z=T(!1),h=T(!1),g=y(()=>a.value.length>200),b=y(()=>{if(!g.value||!u.value)return 0;const H=u.value.$el.querySelector("thead");return H?Be.height(H):0}),B=y(()=>{const{rightBtn:H}=r.option||{};return H!==!1}),V=y(()=>!a.value.length||M.value.length?!1:!(o.bottomLeft||L.value)),Q=y(()=>{const{remoteData:H}=r;if(typeof H=="function")return H();if(typeof H=="object")return H}),L=y(()=>{const{page:H}=r.option||{};return H!==!1||Q.value}),O=T({page:1,rowsPerPage:L.value?20:0,rowsNumber:L.value?0:void 0,sortBy:"",descending:!1}),N=y(()=>{const H=O.value.rowsNumber/(O.value.rowsPerPage||1);return Math.ceil(H)||1}),M=T([]),s=y(()=>{var H;return(H=r.option)==null?void 0:H.selection}),j=()=>{M.value!==r.selected&&(M.value=r.selected||[])},D=()=>he(()=>t("update:selected",M.value));oe(()=>r.selected,()=>j(),{immediate:!0});const I=y(()=>{if(h.value)return;const{height:H}=r.option||{};return H?{"max-height":H}:{}}),x=y(()=>H=>`${H.field}H`),W=y(()=>(H=[],te="")=>te==="H"?H.filter($=>$.headerSlot):H.filter($=>$.slot)),c=H=>S.value=H.filter(te=>!te.required).map(te=>te.name);pt(()=>he(()=>c(F.value)));const _=(H,te)=>{r.formatData&&typeof formatData=="function"?r.formatData(H,O,a,z):(a.value=[],he(()=>{a.value=H.rows||H,O.value.page=+(H.pageNum||1),O.value.rowsNumber=+(H.total||0),te&&te(),z.value=!1,t("update:loading",!1)}))},w=dl((H={pagination:O.value})=>{const{sortBy:te,descending:$}=H.pagination;if(O.value.sortBy=te,O.value.descending=$,!Q.value){a.value=r.data||[];return}Q.value.clearSelected&&(Se(),delete Q.value.clearSelected),z.value=!0,t("update:loading",!0);const q=Date.now()+1e3,f=we(Q.value),J=f.dicMethod==="get"?mt:Ie;f.params=f.params||{},f.params.pageNum=O.value.page,f.params.pageSize=O.value.rowsPerPage,J(f.dicUrl,f.params,A=>{const ae=q-Date.now();if(ae>0){let ce=setTimeout(()=>{_(A,f.done),clearTimeout(ce),ce=null},ae)}else _(A,f.done)},()=>{a.value=[],z.value=!1,t("update:loading",!1)})},1e3);oe(()=>r.data,()=>w()),oe(()=>r.remoteData,()=>w());const G=y(()=>[{label:`5${ne.t("ItemPage")}`,value:5},{label:`10${ne.t("ItemPage")}`,value:10},{label:`20${ne.t("ItemPage")}`,value:20},{label:`50${ne.t("ItemPage")}`,value:50},{label:`100${ne.t("ItemPage")}`,value:100}]),ve=Fe({outlined:!0,"options-dense":!0,dense:!0,options:G,"emit-value":!0,"map-options":!0}),Se=()=>{u.value&&u.value.clearSelection(),t("update:selected",[])};return l({clearSelection:Se}),(H,te)=>{var $;return v(),U(ul,{ref_key:"QxTable",ref:u,pagination:O.value,"onUpdate:pagination":te[9]||(te[9]=q=>O.value=q),columns:n(F),grid:!n(g)&&(C.value||H.$q.screen.xs),"hide-bottom":n(V),loading:e.loading||z.value,"row-key":($=e.rowKey)!=null?$:"id",rows:a.value,style:$e(n(I)),"virtual-scroll":n(g),"virtual-scroll-sticky-size-start":n(b),"visible-columns":S.value,bordered:"",class:"qx-table",dense:"","hide-pagination":"",separator:"cell","wrap-cells":"",onRequest:n(w),onSelection:D},{top:i(q=>[p(sa,{dynamicColumns:S.value,"onUpdate:dynamicColumns":te[0]||(te[0]=f=>S.value=f),grid:C.value,"onUpdate:grid":te[1]||(te[1]=f=>C.value=f),isFullscreen:h.value,"onUpdate:isFullscreen":te[2]||(te[2]=f=>h.value=f),columns:n(F),gridBtn:!n(g),multiColumn:n(k),props:q,rightBtn:n(B),searchBtn:!!n(o).top,onRefresh:n(w)},xe({menuLeft:i(()=>[Y(H.$slots,"menuLeft",{selected:M.value})]),menuRight:i(f=>[Y(H.$slots,"menuRight",{btnAttr:f,props:q})]),_:2},[n(o).top?{name:"top",fn:i(()=>[Y(H.$slots,"top",{props:q}),p(Ee)]),key:"0"}:void 0]),1032,["dynamicColumns","grid","isFullscreen","columns","gridBtn","multiColumn","props","rightBtn","searchBtn","onRefresh"])]),header:i(q=>[(v(!0),P(ie,null,de(n(k),(f,J)=>(v(),U(ra,{key:J,fixedObj:m.value,"onUpdate:fixedObj":te[3]||(te[3]=A=>m.value=A),columns:f,"header-cell-click":e.headerCellClick,"header-click":e.headerClick,index:J,props:q,selection:n(s)},xe({selection:i(()=>[p(Xe,{modelValue:q.selected,"onUpdate:modelValue":A=>q.selected=A,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[de(n(W)(f,"H"),A=>({name:n(x)(A),fn:i(()=>[Y(H.$slots,n(x)(A))])}))]),1032,["fixedObj","columns","header-cell-click","header-click","index","props","selection"]))),128))]),body:i(q=>[p(aa,{fixedObj:m.value,"onUpdate:fixedObj":te[4]||(te[4]=f=>m.value=f),"cell-click":e.cellClick,props:q,"row-click":e.rowClick,"row-cls":e.rowCls,selection:n(s)},xe({selection:i(()=>[p(Xe,{modelValue:q.selected,"onUpdate:modelValue":f=>q.selected=f,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),menu:i(()=>[Y(H.$slots,"menu",{index:q.rowIndex,row:q.row})]),_:2},[de(n(W)(q.cols),f=>({name:f.field,fn:i(()=>[f.slot?Y(H.$slots,f.field,{key:0,index:q.rowIndex,row:q.row}):Z("",!0)])}))]),1032,["fixedObj","cell-click","props","row-click","row-cls","selection"])]),item:i(q=>[p(Yl,{"cell-click":e.cellClick,"header-cell-click":e.headerCellClick,"header-click":e.headerClick,props:q,"row-click":e.rowClick,"row-cls":e.rowCls,selection:n(s)},xe({selection:i(()=>[p(Xe,{modelValue:q.selected,"onUpdate:modelValue":f=>q.selected=f,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),menu:i(()=>[Y(H.$slots,"menu",{index:q.rowIndex,row:q.row})]),_:2},[de(n(W)(q.cols),f=>({name:f.field,fn:i(()=>[f.slot?Y(H.$slots,f.field,{key:0,index:q.rowIndex,row:q.row}):Z("",!0)])}))]),1032,["cell-click","header-cell-click","header-click","props","row-click","row-cls","selection"])]),"no-data":i(({icon:q,message:f})=>[ue("div",ua,[ue("div",da,[p(pe,{name:q,size:"1.5rem"},null,8,["name"]),X(" "+R(f),1)])])]),loading:i(()=>[p(ze,{showing:""},{default:i(()=>[p(Ae,{color:"primary",size:"3em"})]),_:1})]),bottom:i(()=>[ue("div",ca,[ue("div",fa,[M.value.length?(v(),P("span",va,[X(R(H.$t("SelectedTips",[M.value.length]))+" ",1),p(le,{label:H.$t("Empty"),color:"primary",flat:"",padding:"0",onClick:Se},null,8,["label"])])):Z("",!0),Y(H.$slots,"bottomLeft")]),n(L)?(v(),P("div",ma,[ue("span",pa,R(H.$t("Totals"))+": "+R(O.value.rowsNumber||0),1),p(jt,K({modelValue:O.value.rowsPerPage,"onUpdate:modelValue":te[5]||(te[5]=q=>O.value.rowsPerPage=q)},ve,{"onUpdate:modelValue":te[6]||(te[6]=q=>n(w)())}),null,16,["modelValue"]),p(sl,{modelValue:O.value.page,"onUpdate:modelValue":[te[7]||(te[7]=q=>O.value.page=q),te[8]||(te[8]=q=>n(w)())],max:n(N),"max-pages":6},null,8,["modelValue","max"])])):Z("",!0)])]),_:3},8,["pagination","columns","grid","hide-bottom","loading","row-key","rows","style","virtual-scroll","virtual-scroll-sticky-size-start","visible-columns","onRequest"])}}};var ya=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"}));const ga=["none","strict","leaf","leaf-filtered"];var wt=cl({name:"QTree",props:{...fl,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>ga.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazy-load","after-show","after-hide"],setup(e,{slots:l,emit:t}){const{proxy:r}=ql(),{$q:u}=r,o=vl(e,u),a=T({}),d=T(e.ticked||[]),m=T(e.expanded||[]);let S={};Vl(()=>{S={}});const k=y(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),F=y(()=>e.selected!==void 0),C=y(()=>e.icon||u.iconSet.tree.icon),z=y(()=>e.controlColor||e.color),h=y(()=>e.textColor!==void 0?` text-${e.textColor}`:""),g=y(()=>{const $=e.selectedColor||e.color;return $?` text-${$}`:""}),b=y(()=>e.filterMethod!==void 0?e.filterMethod:($,q)=>{const f=q.toLowerCase();return $[e.labelKey]&&$[e.labelKey].toLowerCase().indexOf(f)>-1}),B=y(()=>{const $={},q=(f,J)=>{const A=f.tickStrategy||(J?J.tickStrategy:e.tickStrategy),ae=f[e.nodeKey],ce=f[e.childrenKey]&&f[e.childrenKey].length>0,Ne=f.disabled!==!0&&F.value===!0&&f.selectable!==!1,ge=f.disabled!==!0&&f.expandable!==!1,el=A!=="none",Ke=A==="strict",gt=A==="leaf-filtered",ot=A==="leaf"||A==="leaf-filtered";let it=f.disabled!==!0&&f.tickable!==!1;ot===!0&&it===!0&&J&&J.tickable!==!0&&(it=!1);let Le=f.lazy;Le===!0&&a.value[ae]!==void 0&&Array.isArray(f[e.childrenKey])===!0&&(Le=a.value[ae]);const re={key:ae,parent:J,isParent:ce,lazy:Le,disabled:f.disabled,link:f.disabled!==!0&&(Ne===!0||ge===!0&&(ce===!0||Le===!0)),children:[],matchesFilter:e.filter?b.value(f,e.filter):!0,selected:ae===e.selected&&Ne===!0,selectable:Ne,expanded:ce===!0?m.value.includes(ae):!1,expandable:ge,noTick:f.noTick===!0||Ke!==!0&&Le&&Le!=="loaded",tickable:it,tickStrategy:A,hasTicking:el,strictTicking:Ke,leafFilteredTicking:gt,leafTicking:ot,ticked:Ke===!0?d.value.includes(ae):ce===!0?!1:d.value.includes(ae)};if($[ae]=re,ce===!0&&(re.children=f[e.childrenKey].map(me=>q(me,re)),e.filter&&(re.matchesFilter!==!0?re.matchesFilter=re.children.some(me=>me.matchesFilter):re.noTick!==!0&&re.disabled!==!0&&re.tickable===!0&&gt===!0&&re.children.every(me=>me.matchesFilter!==!0||me.noTick===!0||me.tickable!==!0)===!0&&(re.tickable=!1)),re.matchesFilter===!0&&(re.noTick!==!0&&Ke!==!0&&re.children.every(me=>me.noTick)===!0&&(re.noTick=!0),ot))){if(re.ticked=!1,re.indeterminate=re.children.some(me=>me.indeterminate===!0),re.tickable=re.tickable===!0&&re.children.some(me=>me.tickable),re.indeterminate!==!0){const me=re.children.reduce((ht,tl)=>tl.ticked===!0?ht+1:ht,0);me===re.children.length?re.ticked=!0:me>0&&(re.indeterminate=!0)}re.indeterminate===!0&&(re.indeterminateNextState=re.children.every(me=>me.tickable!==!0||me.ticked!==!0))}return re};return e.nodes.forEach(f=>q(f,null)),$});oe(()=>e.ticked,$=>{d.value=$}),oe(()=>e.expanded,$=>{m.value=$});function V($){const q=[].reduce,f=(J,A)=>{if(J||!A)return J;if(Array.isArray(A)===!0)return q.call(Object(A),f,J);if(A[e.nodeKey]===$)return A;if(A[e.childrenKey])return f(null,A[e.childrenKey])};return f(null,e.nodes)}function Q(){return d.value.map($=>V($))}function L(){return m.value.map($=>V($))}function O($){return $&&B.value[$]?B.value[$].expanded:!1}function N(){e.expanded!==void 0?t("update:expanded",[]):m.value=[]}function M(){const $=m.value,q=f=>{f[e.childrenKey]&&f[e.childrenKey].length>0&&f.expandable!==!1&&f.disabled!==!0&&($.push(f[e.nodeKey]),f[e.childrenKey].forEach(q))};e.nodes.forEach(q),e.expanded!==void 0?t("update:expanded",$):m.value=$}function s($,q,f=V($),J=B.value[$]){if(J.lazy&&J.lazy!=="loaded"){if(J.lazy==="loading")return;a.value[$]="loading",Array.isArray(f[e.childrenKey])!==!0&&(f[e.childrenKey]=[]),t("lazy-load",{node:f,key:$,done:A=>{a.value[$]="loaded",f[e.childrenKey]=Array.isArray(A)===!0?A:[],he(()=>{const ae=B.value[$];ae&&ae.isParent===!0&&j($,!0)})},fail:()=>{delete a.value[$],f[e.childrenKey].length===0&&delete f[e.childrenKey]}})}else J.isParent===!0&&J.expandable===!0&&j($,q)}function j($,q){let f=m.value;const J=e.expanded!==void 0;if(J===!0&&(f=f.slice()),q){if(e.accordion&&B.value[$]){const A=[];B.value[$].parent?B.value[$].parent.children.forEach(ae=>{ae.key!==$&&ae.expandable===!0&&A.push(ae.key)}):e.nodes.forEach(ae=>{const ce=ae[e.nodeKey];ce!==$&&A.push(ce)}),A.length>0&&(f=f.filter(ae=>A.includes(ae)===!1))}f=f.concat([$]).filter((A,ae,ce)=>ce.indexOf(A)===ae)}else f=f.filter(A=>A!==$);J===!0?t("update:expanded",f):m.value=f}function D($){return $&&B.value[$]?B.value[$].ticked:!1}function I($,q){let f=d.value;const J=e.ticked!==void 0;J===!0&&(f=f.slice()),q?f=f.concat($).filter((A,ae,ce)=>ce.indexOf(A)===ae):f=f.filter(A=>$.includes(A)===!1),J===!0&&t("update:ticked",f)}function x($,q,f){const J={tree:r,node:$,key:f,color:e.color,dark:o.value};return kt(J,"expanded",()=>q.expanded,A=>{A!==q.expanded&&s(f,A)}),kt(J,"ticked",()=>q.ticked,A=>{A!==q.ticked&&I([f],A)}),J}function W($){return(e.filter?$.filter(q=>B.value[q[e.nodeKey]].matchesFilter):$).map(q=>G(q))}function c($){if($.icon!==void 0)return ye(pe,{class:"q-tree__icon q-mr-sm",name:$.icon,color:$.iconColor});const q=$.img||$.avatar;if(q)return ye("img",{class:`q-tree__${$.img?"img":"avatar"} q-mr-sm`,src:q})}function _(){t("after-show")}function w(){t("after-hide")}function G($){const q=$[e.nodeKey],f=B.value[q],J=$.header&&l[`header-${$.header}`]||l["default-header"],A=f.isParent===!0?W($[e.childrenKey]):[],ae=A.length>0||f.lazy&&f.lazy!=="loaded";let ce=$.body&&l[`body-${$.body}`]||l["default-body"];const Ne=J!==void 0||ce!==void 0?x($,f,q):null;return ce!==void 0&&(ce=ye("div",{class:"q-tree__node-body relative-position"},[ye("div",{class:h.value},[ce(Ne)])])),ye("div",{key:q,class:`q-tree__node relative-position q-tree__node--${ae===!0?"parent":"child"}`},[ye("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(f.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(f.selected===!0?" q-tree__node--selected":"")+(f.disabled===!0?" q-tree__node--disabled":""),tabindex:f.link===!0?0:-1,onClick:ge=>{Se($,f,ge)},onKeypress(ge){ml(ge)!==!0&&(ge.keyCode===13?Se($,f,ge,!0):ge.keyCode===32&&H($,f,ge,!0))}},[ye("div",{class:"q-focus-helper",tabindex:-1,ref:ge=>{S[f.key]=ge}}),f.lazy==="loading"?ye(pl,{class:"q-tree__spinner",color:z.value}):ae===!0?ye(pe,{class:"q-tree__arrow"+(f.expanded===!0?" q-tree__arrow--rotate":""),name:C.value,onClick(ge){H($,f,ge)}}):null,f.hasTicking===!0&&f.noTick!==!0?ye(Xe,{class:"q-tree__tickbox",modelValue:f.indeterminate===!0?null:f.ticked,color:z.value,dark:o.value,dense:!0,keepColor:!0,disable:f.tickable!==!0,onKeydown:bt,"onUpdate:modelValue":ge=>{te(f,ge)}}):null,ye("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(f.selected===!0?g.value:h.value)},[J?J(Ne):[c($),ye("div",$[e.labelKey])]])]),ae===!0?e.noTransition===!0?ye("div",{class:"q-tree__node-collapsible"+h.value,key:`${q}__q`},[ce,ye("div",{class:"q-tree__children"+(f.disabled===!0?" q-tree__node--disabled":"")},f.expanded?A:null)]):ye(yl,{duration:e.duration,onShow:_,onHide:w},()=>Me(ye("div",{class:"q-tree__node-collapsible"+h.value,key:`${q}__q`},[ce,ye("div",{class:"q-tree__children"+(f.disabled===!0?" q-tree__node--disabled":"")},A)]),[[Rt,f.expanded]])):ce])}function ve($){const q=S[$];q&&q.focus()}function Se($,q,f,J){J!==!0&&ve(q.key),F.value&&q.selectable?e.noSelectionUnset===!1?t("update:selected",q.key!==e.selected?q.key:null):q.key!==e.selected&&t("update:selected",q.key===void 0?null:q.key):H($,q,f,J),typeof $.handler=="function"&&$.handler($)}function H($,q,f,J){f!==void 0&&bt(f),J!==!0&&ve(q.key),s(q.key,!q.expanded,$,q)}function te($,q){if($.indeterminate===!0&&(q=$.indeterminateNextState),$.strictTicking)I([$.key],q);else if($.leafTicking){const f=[],J=A=>{A.isParent?(q!==!0&&A.noTick!==!0&&A.tickable===!0&&f.push(A.key),A.leafTicking===!0&&A.children.forEach(J)):A.noTick!==!0&&A.tickable===!0&&(A.leafFilteredTicking!==!0||A.matchesFilter===!0)&&f.push(A.key)};J($),I(f,q)}}return e.defaultExpandAll===!0&&M(),Object.assign(r,{getNodeByKey:V,getTickedNodes:Q,getExpandedNodes:L,isExpanded:O,collapseAll:N,expandAll:M,setExpanded:s,isTicked:D,setTicked:I,meta:B}),()=>{const $=W(e.nodes);return ye("div",{class:k.value},$.length===0?e.filter?e.noResultsLabel||u.lang.tree.noResults:e.noNodesLabel||u.lang.tree.noNodes:$)}}});const ha={class:"shadow-2 rounded-borders q-pa-sm qx-tree"},ba={class:"qx-tree-title"},ka={__name:"QxTree",props:{field:String,props:Object,options:Array,dicUrl:String,rowInfo:Object,dicQuery:Object,change:Function,showWay:Boolean,loading:Boolean,strategy:String,multiple:Boolean,dicMethods:String,filterMethod:Function,noSelectionUnset:Boolean,modelValue:[String,Array]},emits:["change","getNodes","update:modelValue","update:loading"],setup(e,{expose:l,emit:t}){const r=e;Pt(c=>({"6411c363":V.value.height}));const{height:u}=Be,o=T(""),a=T(null),d=T(r.strategy||"leaf"),m=y(()=>[{label:`${ne.t("CheckWayTip1")}`,value:"strict"},{label:`${ne.t("CheckWayTip2")}`,value:"leaf"},{label:`${ne.t("CheckWayTip3")}`,value:"leaf-filtered"}]),S=y(()=>({clearable:!0,dense:!0,placeholder:ne.t("FilterKeywords"),outlined:!0})),k=Fe({class:"qx-tree-group",dense:!0,inline:!0}),F=y(()=>{const{label:c="label",key:_="id",children:w="children"}=r.props||{};return{accordion:!0,childrenKey:w,labelKey:c,nodeKey:_,filter:o.value,noSelectionUnset:r.noSelectionUnset}}),C=qe(),z=T([]),h=T(""),g=T([]),b=T([]),B=T(!1),V=T({height:"calc(100% - 40px)"}),Q=()=>{he(()=>{if(!a.value)return;const c=a.value.$el.querySelector(".qx-tree-title"),_=a.value.$el.querySelector(".qx-tree-group");if(!c&&!_){let G=40;C["tree-top"]&&(G+=43),r.multiple&&r.showWay&&(G+=31),V.value={height:`calc(100% - ${Math.floor(G)}px)`};return}let w=44;c&&(w+=u(c)),_&&(w+=u(_)),V.value={height:`calc(100% - ${Math.floor(w)}px)`}})},L=()=>{he(()=>{if(!r.multiple&&a.value){const c=a.value.getNodeByKey(h.value);if(c){g.value=(c.parentIds||"").split(",");return}}b.value.length&&!g.value.length&&(g.value=[b.value[0][F.value.nodeKey]])})},O=()=>{if(r.multiple){if(r.modelValue===z.value&&g.value.length)return;z.value=r.modelValue||[],L();return}r.modelValue===h.value&&g.value.length||(h.value=r.modelValue||"",L())},N=()=>{if(r.dicUrl){B.value=!0;const c=we(r.dicQuery||{});M.value(r.dicUrl,c,_=>{b.value=_.rows||_,B.value=!1,t("update:loading",B.value),O()},()=>{B.value=!1,t("update:loading",B.value)});return}r.loading&&(B.value=r.loading),b.value=we(r.options||[]),O()};oe(se(r,"modelValue"),()=>O()),oe([se(r,"options"),se(r,"dicQuery")],()=>{N()},{immediate:!0}),oe(se(r,"loading"),()=>{B.value=r.loading});const M=y(()=>r.dicMethods==="get"?mt:Ie),s=se(r,"rowInfo"),j=c=>{!s.value||(r.multiple?s.value[`SSS_${r.field}`]=c.map(_=>_[F.value.labelKey]).join(","):s.value[`SSS_${r.field}`]=c[F.value.labelKey])},D=c=>{if(d.value==="strict"){he(()=>{const _=a.value.getTickedNodes();_&&j(_),t("update:modelValue",c),r.change?r.change(c,_):t("change",c,_)});return}he(()=>{const _=Object.values(a.value.meta.value),w=[],G=[];for(const ve of _)(ve.ticked||ve.indeterminate)&&(w.push(a.value.getNodeByKey(ve.key)),G.push(ve.key));z.value=G,w&&j(w),t("update:modelValue",G),r.change?r.change(G,w):t("change",G,w)})},I=c=>{he(()=>{const _=a.value.getNodeByKey(c);_&&j(_),t("update:modelValue",c),r.change?r.change(c,_):t("change",c,_)})},x=()=>{B.value=!1,t("update:loading",B.value)};return l({getNodes:()=>{B.value=!0,d.value="strict",he(()=>{const c=a.value.getTickedNodes();t("getNodes",c,x)})},updateSelected:I,updateTicked:D}),(c,_)=>(v(),P("div",ha,[ue("div",ba,[Y(c.$slots,"tree-top",{},void 0,!0),n(C)["tree-top"]&&!(e.multiple&&e.showWay)?(v(),U(tt,{key:0,onResize:Q})):Z("",!0)]),p(Ze,K({modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=w=>o.value=w)},n(S)),null,16,["modelValue"]),e.multiple&&e.showWay?(v(),P(ie,{key:0},[p(vt,K({modelValue:d.value,"onUpdate:modelValue":_[1]||(_[1]=w=>d.value=w),options:n(m)},k),null,16,["modelValue","options"]),p(tt,{onResize:Q})],64)):Z("",!0),e.multiple?(v(),U(n(wt),K({key:1,ref_key:"QxTree",ref:a,expanded:g.value,"onUpdate:expanded":_[2]||(_[2]=w=>g.value=w),ticked:z.value,"onUpdate:ticked":_[3]||(_[3]=w=>z.value=w),"filter-method":e.filterMethod,nodes:b.value,"tick-strategy":d.value},n(F),{"onUpdate:ticked":D}),xe({_:2},[n(C).header?{name:"default-header",fn:i(w=>[Y(c.$slots,"header",{prop:w},void 0,!0)]),key:"0"}:void 0,n(C).body?{name:"default-body",fn:i(w=>[Y(c.$slots,"body",{prop:w},void 0,!0)]),key:"1"}:void 0]),1040,["expanded","ticked","filter-method","nodes","tick-strategy"])):(v(),U(n(wt),K({key:2,ref_key:"QxTree",ref:a,expanded:g.value,"onUpdate:expanded":_[4]||(_[4]=w=>g.value=w),selected:h.value,"onUpdate:selected":_[5]||(_[5]=w=>h.value=w),"filter-method":e.filterMethod,nodes:b.value,"selected-color":"primary"},n(F),{"onUpdate:selected":I}),xe({_:2},[n(C).header?{name:"default-header",fn:i(w=>[Y(c.$slots,"header",{prop:w},void 0,!0)]),key:"0"}:void 0,n(C).body?{name:"default-body",fn:i(w=>[Y(c.$slots,"body",{prop:w},void 0,!0)]),key:"1"}:void 0]),1040,["expanded","selected","filter-method","nodes"])),p(ze,{showing:B.value},{default:i(()=>[p(Ae,{color:"primary",size:"50px"})]),_:1},8,["showing"])]))}};var Gt=Dt(ka,[["__scopeId","data-v-8913cd66"]]),xa=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"}));const _a={__name:"QGroup",props:{type:{type:String,default:"radio"},change:Function,outlined:Boolean,readonly:Boolean,modelValue:[String,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=T(void 0),u=y(()=>t.type==="radio"),o=()=>{if(!(r.value===t.modelValue&&t.modelValue)){if(t.modelValue){r.value=t.modelValue;return}u.value?r.value="":r.value=[]}};oe(se(t,"modelValue"),()=>o(),{immediate:!0});const a=d=>{t.change?t.change(d):l("change",d),l("update:modelValue",d)};return(d,m)=>(v(),U(Ve,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=S=>r.value=S),borderless:"","no-error-icon":""},xe({control:i(({id:S})=>[p(vt,K({id:S,modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=k=>r.value=k),disable:e.readonly,type:e.type},d.$attrs,{"onUpdate:modelValue":a}),null,16,["id","modelValue","disable","type"])]),_:2},[de(Object.keys(qe()),S=>({name:S,fn:i(()=>[Y(d.$slots,S)])}))]),1032,["modelValue"]))}};var $a=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"}));const wa={key:0,class:"placeholder"},Sa={key:1},Ca={class:"full-width row justify-around items-start"},Va={class:"q-month--view q-date__months-content col self-stretch justify-around row items-center"},qa={__name:"QMonth",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Number,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=new Date().getFullYear(),u=be("BgToColor"),o=T(null),a=T(void 0),d=T(!1),m=y(()=>d.value?"q-field--focused q-field--highlighted":""),S=Fe({class:"col-2",dense:!0,flat:!0}),k=T(0),F=x=>+x.replace("-",""),C=y(()=>{const x=+De.formatDate(new Date,"YYYYMM");return W=>{const c=`${h.value}-${He.pad(W,2)}`,_=F(c);if(E(a.value))return _===x?"text-bold text-primary":void 0;if(ee(a.value)==="array")return a.value.includes(c)?`bg-primary text-bold text-${u("primary")}`:void 0;if(ee(a.value)==="object"){if(k.value){const w=F(a.value.from);return w===_?w<k.value?"text-primary q-month__start_hover_month q-month__hover_month q-month__start_month":w>k.value?"text-primary q-month__end_hover_month q-month__hover_month q-month__end_month":"text-primary q-month__hover_month":w<_?_<k.value?"text-primary no-border-radius q-month__hover_month":_===k.value?"text-primary q-month__end_hover_month q-month__hover_month q-month__end_month":void 0:_>k.value?"text-primary no-border-radius q-month__hover_month":_===k.value?"text-primary q-month__start_hover_month q-month__hover_month q-month__start_month":void 0}if(a.value.from&&a.value.to){const w=F(a.value.from),G=F(a.value.to);if(w===_&&G===_)return`bg-primary text-bold text-${u("primary")}`;if(w===_)return`bg-primary text-bold text-${u("primary")} q-month__start_month`;if(G===_)return`bg-primary text-bold text-${u("primary")} q-month__end_month`;if(_>w&&_<G)return"no-border-radius q-month__range"}}if(a.value===c)return`bg-primary text-bold text-${u("primary")}`;if(_===x)return"text-primary text-bold"}}),z=x=>+De.formatDate(x,"YYYY"),h=T(r),g=y(()=>t.multiple?!1:(t.type||"").includes("range")),b=y(()=>E(a.value)?"":ee(a.value)==="array"?a.value.join(", "):ee(a.value)==="object"?`${a.value.from||"NA"}/${a.value.to||"NA"}`:a.value),B=()=>{h.value-=1},V=()=>{h.value+=1},Q=()=>{if(E(a.value)){h.value=r;return}if(ee(a.value)==="array"){h.value=z(a.value[0]);return}if(ee(a.value)==="object"){h.value=z(a.value.from);return}h.value=z(a.value)},L=()=>{if(a.value!==t.modelValue){if(E(t.modelValue)){a.value=void 0;return}if(ee(t.modelValue)==="date"){a.value=De.formatDate(new Date(t.modelValue),"YYYY-MM");return}a.value=t.modelValue}};oe(se(t,"modelValue"),()=>{L()},{immediate:!0});const O=()=>{g.value&&a.value&&!a.value.to&&(a.value=void 0),o.value&&o.value.blur()},N=()=>{l("update:modelValue",a.value||""),t.lazyRules!=="ondemand"&&o.value&&o.value.validate()},M=()=>{d.value=!d.value,d.value&&Q()},s=x=>{!g.value||E(a.value)||ee(a.value)==="object"&&(a.value.to||(k.value=F(`${h.value}-${He.pad(x,2)}`)))},j=x=>{if(x=`${h.value}-${He.pad(x,2)}`,t.multiple){E(a.value)?a.value=[x]:a.value.push(x),l("change",a.value,x);return}if(g.value){if(E(a.value)||a.value.to){k.value=x,a.value={from:x};return}else x<a.value.from?(a.value.to=a.value.from,a.value.from=x):a.value.to=x,k.value=0,d.value=!1,l("change",a.value,x);return}a.value=x,d.value=!1,l("change",x)},D=()=>{if(!d.value||!o.value)return;const x=o.value.$el.getBoundingClientRect(),W=window.innerHeight;(x.top>W||x.bottom<0)&&(d.value=!1)},I=()=>{d.value=!1};return Re(()=>{window.addEventListener("scroll",D,!0),window.addEventListener("resize",I,!1)}),We(()=>{window.removeEventListener("scroll",D,!0),window.removeEventListener("resize",I,!1)}),(x,W)=>(v(),U(Ve,K({ref_key:"QMonth",ref:o,modelValue:a.value,"onUpdate:modelValue":W[1]||(W[1]=c=>a.value=c),autogrow:!1,class:n(m),clearable:e.clearable,"lazy-rules":"ondemand"},x.$attrs,{onFocus:M}),{control:i(()=>[n(b)?x.$attrs.readonly?(v(),P("span",Sa,R(n(b)),1)):(v(),U(Ce,{key:2},{default:i(()=>[X(R(n(b)),1)]),_:1})):(v(),P("span",wa,R(e.placeholder),1))]),append:i(()=>[p(pe,{name:"calendar_month"})]),default:i(()=>[p(Pe,{modelValue:d.value,"onUpdate:modelValue":W[0]||(W[0]=c=>d.value=c),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"q-month column justify-around items-start","no-parent-event":"","no-refocus":"",self:"top left",onHide:N,onBeforeHide:O},{default:i(()=>[ue("div",Ca,[p(le,{dense:"",flat:"",icon:"chevron_left",round:"",onClick:B}),p(le,{dense:"",flat:""},{default:i(()=>[X(R(h.value),1)]),_:1}),p(le,{dense:"",flat:"",icon:"chevron_right",round:"",onClick:V})]),ue("div",Va,[(v(),P(ie,null,de(12,c=>p(le,K({key:c,class:n(C)(c)},S,{onClick:_=>j(c),onMouseenter:_=>s(c)}),{default:i(()=>[X(R(x.$t(`M${c}`)),1)]),_:2},1040,["class","onClick","onMouseenter"])),64))])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var Ba=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"}));const Ta={__name:"QNumber",props:{rules:Array,input:Function,min:[String,Number],max:[String,Number],decimals:[String,Number],lazyRules:[Boolean,String],modelValue:[String,Number]},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,r=T(null),u=T(null),o=y(()=>t.lazyRules===!0?!1:t.lazyRules),a=y(()=>{if(t.decimals>=0)return[0,"0"].includes(t.decimals)?/^-?\d+$/:new RegExp(new RegExp("\\.\\d{0,"+t.decimals+"}/?$"))}),d=y(()=>{const k=t.rules||[];return E(t.min)||k.push(F=>E(F)||F>=t.min||ne.t("NotLess",[t.min])),E(t.max)||k.push(F=>E(F)||F<=t.max||ne.t("NotGreater",[t.max])),a.value&&k.push(F=>E(F)||/^-?\d+$/.test(F)||a.value.test(F)||ne.t("DecimalDigits",[t.decimals])),k}),m=()=>{t.modelValue!==u.value&&(u.value=t.modelValue,he(()=>{r.value&&r.value.resetValidation()}))};oe(se(t,"modelValue"),()=>m(),{immediate:!0});const S=(k="")=>{t.input&&typeof t.input=="function"&&t.input(k),l("update:modelValue",k)};return(k,F)=>(v(),U(Ze,K({ref_key:"QNumber",ref:r,modelValue:u.value,"onUpdate:modelValue":F[0]||(F[0]=C=>u.value=C),modelModifiers:{number:!0},"lazy-rules":n(o),rules:n(d),step:"any",title:"",type:"number"},k.$attrs,{"onUpdate:modelValue":S}),xe({_:2},[de(Object.keys(qe()),C=>({name:C,fn:i(()=>[Y(k.$slots,C)])}))]),1040,["modelValue","lazy-rules","rules"]))}};var ja=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"}));const Fa={key:0,class:"placeholder"},za={key:1},Na={__name:"QSelectTree",props:{type:String,props:Object,field:String,dicUrl:String,options:Array,rowInfo:Object,clearable:{type:Boolean,default:!0},change:Function,dicQuery:Object,multiple:Boolean,dicMethods:String,placeholder:String,lazyRules:[Boolean,String],modelValue:[String,Object,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=T(null),u=T(null),o=T(void 0),a=T(""),d=y(()=>{const{label:Q="label"}=t.props||{};return Q}),m=T(!1),S=y(()=>{const Q=we(t);return Q.noSelectionUnset=!0,delete Q.type,delete Q.change,delete Q.placeholder,delete Q.modelValue,Q}),k=se(t,"rowInfo"),F=()=>{k.value&&(k.value[`SSS_${t.field}`]=a.value)},C=()=>{if(o.value===t.modelValue){F();return}if(E(t.modelValue)){o.value=t.multiple?[]:"",b("",o.value);return}m.value||(m.value=!0),he(()=>{u.value&&(t.multiple?(u.value.updateTicked(t.modelValue),m.value=!1):u.value.updateSelected(t.modelValue)),F()}),o.value=t.modelValue};oe(se(t,"modelValue"),()=>C(),{immediate:!0});const z=()=>{m.value=!m.value},h=()=>{r.value&&r.value.blur()},g=()=>{l("update:modelValue",o.value||""),t.lazyRules!=="ondemand"&&r.value&&r.value.validate()},b=(Q,L)=>{E(L)?a.value="":t.multiple?a.value=L.map(O=>O[d.value]).join(", "):a.value=L[d.value],t.multiple||(m.value=!1),t.change?t.change(Q,L):l("change",Q,L)},B=()=>{if(!m.value||!r.value)return;const Q=r.value.$el.getBoundingClientRect(),L=window.innerHeight;(Q.top>L||Q.bottom<0)&&(m.value=!1)},V=()=>{m.value=!1};return Re(()=>{window.addEventListener("scroll",B,!0),window.addEventListener("resize",V,!1)}),We(()=>{window.removeEventListener("scroll",B,!0),window.removeEventListener("resize",V,!1)}),(Q,L)=>(v(),U(Ve,K({ref_key:"selectTree",ref:r,modelValue:o.value,"onUpdate:modelValue":L[2]||(L[2]=O=>o.value=O),clearable:e.clearable,"lazy-rules":"ondemand"},Q.$attrs,{onFocus:z}),xe({control:i(()=>[a.value?Q.$attrs.readonly?(v(),P("span",za,R(a.value),1)):(v(),U(Ce,{key:2},{default:i(()=>[X(R(a.value),1)]),_:1})):(v(),P("span",Fa,R(e.placeholder),1))]),default:i(()=>[p(Pe,{modelValue:m.value,"onUpdate:modelValue":L[1]||(L[1]=O=>m.value=O),offset:[0,5],anchor:"bottom left",breakpoint:"0",fit:"","no-parent-event":"","no-refocus":"",self:"top left",onHide:g,onBeforeHide:h},{default:i(()=>[p(Gt,K({ref_key:"treeRef",ref:u,modelValue:o.value,"onUpdate:modelValue":L[0]||(L[0]=O=>o.value=O)},n(S),{onChange:b}),null,16,["modelValue"])]),_:1},8,["modelValue"])]),_:2},[de(Object.keys(qe()),O=>({name:O,fn:i(()=>[Y(Q.$slots,O)])})),Q.$attrs.readonly?void 0:{name:"append",fn:i(()=>[p(pe,{class:fe([m.value?"rotate-180":"","q-select__dropdown-icon"]),name:"arrow_drop_down"},null,8,["class"])]),key:"0"}]),1040,["modelValue","clearable"]))}};var La=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"}));const Qa={key:0,class:"placeholder"},Oa={key:1},Ma={class:"full-height row items-center"},Ua={class:"q-year--view q-date__years-content col self-stretch justify-around row items-center"},Aa={class:"full-height row items-center"},Pa={__name:"QYear",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Number,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=new Date().getFullYear(),u=be("BgToColor"),o=T(null),a=T(void 0),d=T(!1),m=y(()=>d.value?"q-field--focused q-field--highlighted":""),S=Fe({class:"col-3",dense:!0,flat:!0}),k=T(0),F=y(()=>I=>{const x=Number(z.value)+I;if(E(a.value))return x===r?"text-bold text-primary":void 0;if(ee(a.value)==="array")return a.value.includes(x)||a.value.includes(String(x))?`bg-primary text-bold text-${u("primary")}`:void 0;if(ee(a.value)==="object"){if(k.value){const W=Number(a.value.from);return k.value=+k.value,W===x?W<k.value?"text-primary q-year__start_hover_year q-year__hover_year q-year__start_year":W>k.value?"text-primary q-year__end_hover_year q-year__hover_year q-year__end_year":"text-primary q-year__hover_year":W<x?x<k.value?"text-primary no-border-radius q-year__hover_year":x===k.value?"text-primary q-year__end_hover_year q-year__hover_year q-year__end_year":void 0:x>k.value?"text-primary no-border-radius q-year__hover_year":x===k.value?"text-primary q-year__start_hover_year q-year__hover_year q-year__start_year":void 0}if(a.value.from&&a.value.to){const W=Number(a.value.from),c=Number(a.value.to);if(W===x&&c===x)return`bg-primary text-bold text-${u("primary")}`;if(W===x)return`bg-primary text-bold text-${u("primary")} q-year__start_year`;if(c===x)return`bg-primary text-bold text-${u("primary")} q-year__end_year`;if(x>W&&x<c)return"no-border-radius q-year__range"}}if(Number(a.value)===x)return`bg-primary text-bold text-${u("primary")}`;if(x===r)return"text-primary text-bold"}),C=I=>I-I%20-1,z=T(C(r)),h=y(()=>t.multiple?!1:(t.type||"").includes("range")),g=y(()=>{if(E(a.value))return"";if(ee(a.value)==="array"){if(!h.value)return a.value.join(", ");let I="";for(const x of a.value)I+=`${x.from||"NA"}/${x.to||"NA"}, `;return I.slice(0,-2)}return ee(a.value)==="object"?`${a.value.from||"NA"}/${a.value.to||"NA"}`:a.value}),b=()=>{z.value-=20},B=()=>{z.value+=20},V=()=>{if(E(a.value)){z.value=C(r);return}if(ee(a.value)==="array"){z.value=C(+a.value[0]);return}if(ee(a.value)==="object"){z.value=C(+a.value.from);return}z.value=C(+a.value)},Q=()=>{if(a.value!==t.modelValue){if(E(t.modelValue)){a.value=void 0;return}if(ee(t.modelValue)==="date"){a.value=t.modelValue.getFullYear();return}a.value=t.modelValue}};oe(se(t,"modelValue"),()=>{Q()},{immediate:!0});const L=()=>{h.value&&a.value&&!a.value.to&&(a.value=void 0),o.value&&o.value.blur()},O=()=>{l("update:modelValue",a.value||""),t.lazyRules!=="ondemand"&&o.value&&o.value.validate()},N=()=>{d.value=!d.value,d.value&&V()},M=I=>{!h.value||E(a.value)||ee(a.value)==="object"&&(a.value.to||(k.value=+I.target.textContent))},s=I=>{const x=Number(z.value)+I;if(t.multiple){E(a.value)?a.value=[x]:a.value.push(x),l("change",a.value,x);return}if(h.value){if(E(a.value)||a.value.to){k.value=x,a.value={from:x};return}else x<a.value.from?(a.value.to=a.value.from,a.value.from=x):a.value.to=x,k.value=0,d.value=!1,l("change",a.value,x);return}a.value=x,d.value=!1,l("change",x)},j=()=>{if(!d.value||!o.value)return;const I=o.value.$el.getBoundingClientRect(),x=window.innerHeight;(I.top>x||I.bottom<0)&&(d.value=!1)},D=()=>{d.value=!1};return Re(()=>{window.addEventListener("scroll",j,!0),window.addEventListener("resize",D,!1)}),We(()=>{window.removeEventListener("scroll",j,!0),window.removeEventListener("resize",D,!1)}),(I,x)=>(v(),U(Ve,K({ref_key:"QYear",ref:o,modelValue:a.value,"onUpdate:modelValue":x[1]||(x[1]=W=>a.value=W),autogrow:!1,class:n(m),clearable:e.clearable,"lazy-rules":"ondemand"},I.$attrs,{onFocus:N}),{control:i(()=>[n(g)?I.$attrs.readonly?(v(),P("span",Oa,R(n(g)),1)):(v(),U(Ce,{key:2},{default:i(()=>[X(R(n(g)),1)]),_:1})):(v(),P("span",Qa,R(e.placeholder),1))]),append:i(()=>[p(pe,{name:"edit_calendar"})]),default:i(()=>[p(Pe,{modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=W=>d.value=W),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"q-year row no-wrap justify-around items-start","no-parent-event":"","no-refocus":"",self:"top left",onHide:O,onBeforeHide:L},{default:i(()=>[ue("div",Ma,[p(le,{dense:"",flat:"",icon:"chevron_left",round:"",onClick:b})]),ue("div",Ua,[(v(),P(ie,null,de(21,W=>p(le,K({key:W,class:n(F)(W)},S,{onClick:c=>s(W),onMouseenter:M}),{default:i(()=>[X(R(z.value+W),1)]),_:2},1040,["class","onClick"])),64))]),ue("div",Aa,[p(le,{dense:"",flat:"",icon:"chevron_right",round:"",onClick:B})])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"}));const Da={key:0,class:"placeholder"},Ha={key:1},Ea={__name:"QxDate",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=be("BgToColor"),u=T(null),o=T(void 0),a=T(!1),d=y(()=>a.value?"q-field--focused q-field--highlighted":""),m=y(()=>(t.type||"").includes("time")?"YYYY-MM-DD HH:mm":"YYYY-MM-DD"),S=y(()=>(t.type||"").includes("range")),k=y(()=>{const{multiple:Q,option:L}=t,O=!(Q||S.value);return{"today-btn":!0,multiple:Q,range:S.value,mask:m,noUnset:O,options:L}}),F=y(()=>{if(E(o.value))return"";if(ee(o.value)==="array"){if(!S.value)return o.value.join(", ");let Q="";for(const L of o.value)Q+=`${L.from||"NA"}/${L.to||"NA"}, `;return Q.slice(0,-2)}return ee(o.value)==="object"?`${o.value.from||"NA"}/${o.value.to||"NA"}`:o.value}),C=()=>{if(o.value!==t.modelValue){if(E(t.modelValue)){o.value=void 0;return}o.value=t.modelValue}};oe(se(t,"modelValue"),()=>{C()},{immediate:!0});const z=()=>{u.value&&u.value.blur()},h=()=>{l("update:modelValue",o.value||""),t.lazyRules!=="ondemand"&&u.value&&u.value.validate()},g=()=>{a.value=!a.value},b=Q=>{l("change",Q),Q&&(t.multiple||(a.value=!1))},B=()=>{if(!a.value||!u.value)return;const Q=u.value.$el.getBoundingClientRect(),L=window.innerHeight;(Q.top>L||Q.bottom<0)&&(a.value=!1)},V=()=>{a.value=!1};return Re(()=>{window.addEventListener("scroll",B,!0),window.addEventListener("resize",V,!1)}),We(()=>{window.removeEventListener("scroll",B,!0),window.removeEventListener("resize",V,!1)}),(Q,L)=>(v(),U(Ve,K({ref_key:"QxDate",ref:u,modelValue:o.value,"onUpdate:modelValue":L[2]||(L[2]=O=>o.value=O),class:n(d),clearable:e.clearable,"lazy-rules":"ondemand"},Q.$attrs,{onFocus:g}),{control:i(()=>[n(F)?Q.$attrs.readonly?(v(),P("span",Ha,R(n(F)),1)):(v(),U(Ce,{key:2},{default:i(()=>[X(R(n(F)),1)]),_:1})):(v(),P("span",Da,R(e.placeholder),1))]),append:i(()=>[p(pe,{name:"event"})]),default:i(()=>[p(Pe,{modelValue:a.value,"onUpdate:modelValue":L[1]||(L[1]=O=>a.value=O),offset:[0,5],anchor:"bottom left",breakpoint:"0","no-parent-event":"","no-refocus":"",self:"top left",onHide:h,onBeforeHide:z},{default:i(()=>[p(gl,K({modelValue:o.value,"onUpdate:modelValue":L[0]||(L[0]=O=>o.value=O),"text-color":n(r)("primary")},n(k),{"onUpdate:modelValue":b}),null,16,["modelValue","text-color"])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"}));const Wa={__name:"QxEditor",props:{input:Function,readonly:Boolean,clearable:Boolean,placeholder:String,modelValue:[String,Number]},emits:["input","update:modelValue"],setup(e,{emit:l}){const t=e,r=T(null),u=y(()=>({"toolbar-rounded":!0,"min-height":"5rem",placeholder:t.placeholder,readonly:t.readonly})),o=T(""),a=()=>{o.value!==t.modelValue&&(o.value=t.modelValue||"")};oe(se(t,"modelValue"),()=>a(),{immediate:!0});const d=()=>he(()=>r.value.focus()),m=S=>{l("update:modelValue",S),t.input?t.input(S):l("input",S)};return(S,k)=>(v(),U(Ve,K({modelValue:o.value,"onUpdate:modelValue":k[1]||(k[1]=F=>o.value=F),readonly:e.readonly,class:"qx-editor","no-error-icon":""},S.$attrs,{onFocus:d}),{control:i(()=>[p(hl,K({ref_key:"QxEditor",ref:r,modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=F=>o.value=F)},n(u),{"onUpdate:modelValue":m}),null,16,["modelValue"])]),_:1},16,["modelValue","readonly"]))}};var Ka=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"}));function Xt(e={}){return e.label?e.label.split(",").map(l=>l.trim()):["label"]}function Jt(e={}){return e.value||"value"}const St="--";function Zt(e,l){if(E(e))return"";if(ee(e)!=="object")return e;const t=Xt(l);let r="";for(const u of t)r+=`${St}${e[u]}`;return r.replace(St,"")}function Ue(e,l){return E(e)?"":ee(e)!=="object"?e:e[Jt(l)]}function st(e,l){if(E(e))return!1;const t=ee(e);if(!["object","array"].includes(t))return!1;const r=l?l.disable||"isEnable":"disable";return t==="object"?[!0,"0"].includes(e[r]):!!e.filter(u=>[!0,"0"].includes(u[r]))}function ut(e={},l,t){if(E(e))return"";const r=t||Zt;return ee(e)==="array"?e.map(u=>r(u,l)).join(","):r(e,l)}function Ya(e={},l){return E(e)?"":ee(e)==="array"?e.map(t=>Ue(t,l)).join(","):Ue(e,l)}function Ga(e=[],l,t){return E(t)?e:(t=t.toLowerCase(),e.filter(r=>String(Zt(r,l)).toLowerCase().includes(t)))}function Ye(e,l,t){const r=new Map;return t&&(e=we(e)),e.reverse(),e=e.filter(u=>!r.has(Ue(u,l))&&r.set(Ue(u,l),1)),e.reverse()}const Xa={__name:"QxSelect",props:{type:String,rules:Array,props:Object,field:String,page:Boolean,dicUrl:String,options:Array,clearable:{type:Boolean,default:!0},rowInfo:Object,loading:Boolean,change:Function,dicQuery:Object,keyWords:String,multiple:Boolean,dicMethod:String,placeholder:String,formatLabel:Function,modelValue:[String,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=T(0),u=T([]),o=T(null),a=T(!!t.dicUrl),d=T(!1),m=T(void 0),S=T(!1),k=T(t.options||[]),F=y(()=>Ya(m.value,t.props)),C=y(()=>t.dicMethod==="get"?mt:Ie),z=y(()=>E(m.value)?t.placeholder:""),h=y(()=>c=>String(F.value||"").split(",").includes(Ue(c,t.props))?!1:st(c,t.props)),g=y(()=>{const c=t.rules||[];return c.push(_=>!st(_,t.props)||ne.t("SelectedTip")),c}),b=se(t,"rowInfo"),B=c=>{b.value&&(b.value[`SSS_${t.field}`]=ut(c,t.props,t.formatLabel))},V=c=>{let _=[];ee(c)==="number"?_=[c]:ee(c)==="array"?_=c:ee(c)==="string"&&(_=String(c).split(","));const w=(k.value||[]).filter(ve=>_.includes(Ue(ve,t.props)));if(w.length===_.length){u.value=Object.freeze([...k.value]),m.value=t.multiple?w:w[0],B(m.value);return}if(!a.value)return;const G=we(t.dicQuery||{});G[Jt(t.props)]=_.join(","),G.pageSize=_.length,d.value=!0,C.value(t.dicUrl,G,ve=>{const Se=ve.rows||ve;k.value=Ye([...t.options||[],...Se],t.props),u.value=Object.freeze([...k.value]),m.value=t.multiple?Ye([...w,...Se],t.props):Se[0],B(m.value),d.value=!1},()=>{u.value=Object.freeze([...k.value]),m.value=t.multiple?w:w[0]||c,B(m.value),d.value=!1})},Q=()=>{if(F.value===t.modelValue){B(m.value);return}if(E(t.modelValue)){m.value=void 0;return}V(t.modelValue)},L=()=>{a.value=!!t.dicUrl,k.value=t.options||[],Q()};oe(se(t,"modelValue"),()=>Q()),oe(se(t,"options"),()=>L()),oe(se(t,"dicQuery"),()=>L(),{immediate:!0});const O=c=>{const _=we(t.dicQuery||{});d.value=!0,C.value(t.dicUrl,_,w=>{const G=w.rows||w;k.value=Ye([...t.options||[],...G],t.props),c(()=>{u.value=Object.freeze([...k.value])}),a.value=!1,d.value=!1},()=>{c(()=>{u.value=Object.freeze([...k.value])}),d.value=!1})},N=T(1),M=T(1e4),s=T(void 0),j=({ref:c,to:_})=>{if(!t.page||!a.value||d.value||M.value&&_>=M.value)return;d.value=!0;const w=we(t.dicQuery||{});if(s.value)if(t.keyWords)w[t.keyWords]=s.value,w.andKeywordLikeItem={keyword:s.value,propertys:[t.keyWords]};else{const G=Xt(t.props);w.andKeywordLikeItem={keyword:s.value,propertys:G},G.map(ve=>(w[ve]=s.value,ve))}w.pageNum=N.value,w.pageSize=50,C.value(t.dicUrl,w,G=>{N.value++;const ve=G.rows||G;!s.value&&G.total&&(M.value=+G.total),k.value=Ye([...t.options||[],...ve],t.props),u.value=Object.freeze([...k.value]),he(()=>c.refresh()),a.value=!1,d.value=!1},()=>{d.value=!1})},D=(c,_)=>{if(r.value=0,s.value=c,c&&t.page&&(a.value=!!t.dicUrl),a.value){if(t.page){r.value=800,_();return}O(_)}else _(()=>{u.value=Ga(k.value,t.props,c)})},I=()=>S.value=!0,x=()=>W(),W=()=>{if(he(()=>{o.value&&o.value.blur()}),!S.value)return;let c=t.multiple?m.value:[m.value];c=we(c),l("update:modelValue",F.value),t.change?t.change(F.value,c):l("change",F.value,c),S.value=!1};return(c,_)=>(v(),U(jt,K({ref_key:"QxSelect",ref:o,modelValue:m.value,"onUpdate:modelValue":_[0]||(_[0]=w=>m.value=w),clearable:e.clearable,"input-debounce":r.value,loading:e.loading||d.value,multiple:e.multiple,"option-disable":w=>n(h)(w),options:u.value,placeholder:n(z),rules:n(g),behavior:"menu","transition-hide":"jump-up","transition-show":"jump-down","use-input":""},c.$attrs,{onClear:x,onFilter:D,onPopupHide:W,onVirtualScroll:j,"onUpdate:modelValue":I}),xe({selected:i(()=>[p(lt,null,{default:i(()=>[p(Ce,null,{default:i(()=>[X(R(n(ut)(m.value,e.props,e.formatLabel)),1)]),_:1})]),_:1})]),option:i(({itemProps:w,opt:G})=>[p(at,K({class:[n(st)(G,e.props)?"bg-red-4":"","row items-center"]},w),{default:i(()=>[p(lt,null,{default:i(()=>[p(Ce,null,{default:i(()=>[X(R(n(ut)(G,e.props,e.formatLabel)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["class"])]),"no-option":i(()=>[p(at,null,{default:i(()=>[p(et,{class:"text-italic text-center"},{default:i(()=>[X(R(c.$t("NoData")),1)]),_:1})]),_:1})]),_:2},[de(Object.keys(qe()),w=>({name:w,fn:i(()=>[Y(c.$slots,w)])}))]),1040,["modelValue","clearable","input-debounce","loading","multiple","option-disable","options","placeholder","rules"]))}};var Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"}));const Za={key:0},er={key:1,class:"placeholder"},tr={__name:"QxTime",props:{type:String,clearable:{type:Boolean,default:!0},placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,r=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],u=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],o=T(null),a=T(null),d=T(null),m=T(void 0),S=T(!1),k=y(()=>S.value?"q-field--focused q-field--highlighted":""),F=y(()=>(L,O)=>O==="H"?(m.value||"").startsWith(L):(m.value||"").endsWith(L)),C=(L="",O)=>{if(!L)return;if(O==="H"){const M=u.findIndex(s=>L.endsWith(s));d.value&&d.value.setScrollPosition("vertical",M*32-80,0);return}const N=r.findIndex(M=>L.startsWith(M));a.value&&a.value.setScrollPosition("vertical",N*32-80,0)},z=()=>{if(m.value!==t.modelValue){if(E(t.modelValue)){m.value=void 0;return}typeof t.modelValue=="object"?m.value=De.formatDate(t.modelValue,"HH:mm"):m.value=t.modelValue}};oe(se(t,"modelValue"),()=>{z()},{immediate:!0});const h=()=>{o.value&&o.value.blur()},g=()=>{l("update:modelValue",m.value||""),t.lazyRules!=="ondemand"&&o.value&&o.value.validate()},b=()=>{S.value=!S.value;let L=setTimeout(()=>{C(m.value,"H"),C(m.value,"M"),clearTimeout(L),L=null},0)},B=(L,O)=>{if(O==="H"){if(!m.value){m.value=`${L}:00`,d.value&&d.value.setScrollPosition("vertical",0,200);return}m.value=m.value.replace(/^../,L),C(m.value,O);return}if(!m.value){m.value=`08:${L}`,a.value&&a.value.setScrollPosition("vertical",7*32,100);return}m.value=m.value.replace(/..$/,L),C(m.value,O)},V=()=>{if(!S.value||!o.value)return;const L=o.value.$el.getBoundingClientRect(),O=window.innerHeight;(L.top>O||L.bottom<0)&&(S.value=!1)},Q=()=>{S.value=!1};return Re(()=>{window.addEventListener("scroll",V,!0),window.addEventListener("resize",Q,!1)}),We(()=>{window.removeEventListener("scroll",V,!0),window.removeEventListener("resize",Q,!1)}),(L,O)=>(v(),U(Ve,K({ref_key:"QxTime",ref:o,modelValue:m.value,"onUpdate:modelValue":O[1]||(O[1]=N=>m.value=N),class:n(k),clearable:e.clearable,"lazy-rules":"ondemand"},L.$attrs,{onFocus:b}),{control:i(()=>[m.value?(v(),P("span",Za,R(m.value),1)):(v(),P("span",er,R(e.placeholder),1))]),append:i(()=>[p(pe,{name:"access_time"})]),default:i(()=>[p(Pe,{modelValue:S.value,"onUpdate:modelValue":O[0]||(O[0]=N=>S.value=N),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"qx-time","no-parent-event":"","no-refocus":"",self:"top left",onHide:g,onBeforeHide:h},{default:i(()=>[p(ct,{ref_key:"hourArea",ref:a},{default:i(()=>[(v(),P(ie,null,de(r,N=>Me(p(at,{key:N,active:n(F)(N,"H"),"active-class":"time-active-cls",clickable:"",dense:"",onClick:M=>B(N,"H")},{default:i(()=>[p(et,null,{default:i(()=>[X(R(N),1)]),_:2},1024)]),_:2},1032,["active","onClick"]),[[xt]])),64))]),_:1},512),p(Ee,{vertical:""}),p(ct,{ref_key:"minArea",ref:d},{default:i(()=>[(v(),P(ie,null,de(u,N=>Me(p(at,{key:N,active:n(F)(N,"M"),"active-class":"time-active-cls",clickable:"",dense:"",onClick:M=>B(N,"M")},{default:i(()=>[p(et,null,{default:i(()=>[X(R(N),1)]),_:2},1024)]),_:2},1032,["active","onClick"]),[[xt]])),64))]),_:1},512)]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var lr=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"}));const ar={__name:"QCharts",props:{rows:Array,ySite:Array,xSite:String,xName:String,title:String,colors:Array,stack:Object,charts:Array,xRotate:Number,legend:{type:Boolean,default:!0},loading:Boolean,contentClass:String,labelMap:[Object,Array]},setup(e){const l=e,t=T(null),r=y(()=>E(l.labelMap)?E(l.xSite)?[]:[l.xSite]:ee(l.labelMap)==="object"?E(l.xSite)?Object.keys(l.labelMap):[l.xSite,...Object.keys(l.labelMap)]:E(l.xSite)?l.labelMap:[l.xSite,...l.labelMap]),u=y(()=>({type:"category",name:l.xName||"",nameLocation:"start",nameTextStyle:{align:"center",verticalAlign:"top",padding:[8,0,0,5]},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{interval:0,rotate:l.xRotate||0}})),o=y(()=>{if(E(l.ySite))return{};const b=[];for(const B of l.ySite)ee(B)==="object"?b.push({name:B.name,type:"value",axisLabel:{formatter:"{value}"+(B.format||"")},alignTicks:!0}):b.push({type:"value",axisLabel:{formatter:"{value}"+(B||"")},alignTicks:!0});return b}),a=y(()=>({barMaxWidth:30,barMinWidth:8,symbolSize:8,smooth:!0,itemStyle:{borderRadius:[5,5,0,0]}})),d=b=>{if(!E(l.stack)){for(const B in l.stack)if((l.stack[B]||[]).includes(b))return B}},m=y(()=>{if(E(l.charts)){if(E(r.value))return[];const B=[];for(const V of r.value)V!==r.value[0]&&B.push({type:"bar",name:V,...a.value,stack:d(V)});return B}const b=[];for(const B of l.charts)if(ee(B)==="object"){const V={...a.value,...B};B.color&&(V.itemStyle=V.itemStyle||{},V.itemStyle.color=new _t(0,0,0,1,B.color)),B.emColor&&(V.emphasis={itemStyle:{color:new _t(0,0,0,1,B.emColor)}}),b.push(V)}else b.push({type:B,...a.value});return b}),S=b=>E(l.labelMap)||ee(l.labelMap)==="array"?b:l.labelMap[b]||b,k=(b,B)=>E(b)?"-":ee(b)==="object"?E(b[B])?"-":b[B]:b,F=(b=[])=>{let B="",V="";for(const Q of b)V||(V=Q.axisValue),B+=`${Q.marker} ${S(Q.seriesName)}\uFF1A${k(Q.value,Q.seriesName)}<br />`;return`${V}<br />${B}`},C=y(()=>{const b={dataset:{dimensions:r.value,source:l.rows||[]},legend:{top:10,show:l.legend,data:null,formatter:V=>S(V)},grid:{top:50,left:50,right:20,bottom:30},title:{top:8,text:l.title},tooltip:{trigger:"axis",className:"echarts-tooltip-cls",formatter:V=>F(V)},xAxis:u.value,yAxis:o.value,series:m.value},B=(l.rows||[]).length;return B>30?b.dataZoom=[{show:!0,type:"slider",xAxisIndex:0,end:Math.floor(3e3/B),showDetail:!1,brushSelect:!1}]:b.dataZoom=[{show:!1}],l.colors&&(b.color=l.colors),b});let z=null;const h=()=>{z||(z=Bl(t.value)),z.setOption(C.value)},g=()=>{if(z)return z.resize();t.value&&h()};return(b,B)=>(v(),P(ie,null,[ue("div",{ref_key:"QChart",ref:t,class:fe([e.contentClass,"q-charts shadow-3 rounded-borders"])},null,2),p(ze,{showing:e.loading},{default:i(()=>[p(Ae,{color:"primary",size:"50px"})]),_:1},8,["showing"]),p(tt,{debounce:"1000",onResize:g})],64))}};var rr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"}));const nr={class:"q-preview"},or={class:"q-preview-tip glossy text-white flex justify-between items-center"},ir=["src"],sr={class:"q-preview-tip glossy text-white flex justify-center items-center q-gutter-x-xl"},yt={__name:"QPreview",props:{name:String,index:Number,imgList:Array,keyWords:String,modalValue:Boolean},setup(e){const l=e,t=T("false"),r=T(l.index||0),u=y(()=>{if(!(!l.imgList||!l.imgList[r.value]))return l.imgList[r.value][l.name||"name"]});pt(()=>{r.value=l.index||0});const o=y(()=>C=>{if(typeof C=="string")return C;if(l.keyWords){const z=l.keyWords.split(".");let h;for(const g of z)h?h=h[g]:h=C[g];return h}return C.src}),a=T(1),d=T(0),m=y(()=>({transform:`scale(${a.value}) rotate(${d.value}deg)`})),S=C=>{a.value*=C},k=C=>d.value+=C,F=()=>{a.value=1,d.value=0};return(C,z)=>(v(),U(qt,{modelValue:t.value,"onUpdate:modelValue":z[5]||(z[5]=h=>t.value=h),"full-width":"","full-height":""},{default:i(()=>[ue("div",nr,[ue("div",or,[X(R(n(u)||`${C.$t("Picture")}${C.$t("Preview")}`)+" ",1),Me((v(),U(le,{class:"q-btn-close",dense:"",flat:"",icon:"close"},{default:i(()=>[p(_e,ke(je(C.$tooltipAttr)),{default:i(()=>[X(R(C.$t("Close")),1)]),_:1},16)]),_:1})),[[bl]])]),p(kl,{"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"",modelValue:r.value,"onUpdate:modelValue":z[0]||(z[0]=h=>r.value=h),thumbnails:"",infinite:""},{default:i(()=>[(v(!0),P(ie,null,de(e.imgList||[],(h,g)=>(v(),U(xl,{key:g,name:g,"img-src":n(o)(h)},{default:i(()=>[ue("img",{class:"rounded-borders",src:n(o)(h),style:$e(n(m))},null,12,ir)]),_:2},1032,["name","img-src"]))),128))]),_:1},8,["modelValue"]),ue("div",sr,[p(le,{dense:"",flat:"",icon:"loupe",onClick:z[1]||(z[1]=h=>S(1.1))}),p(le,{dense:"",flat:"",icon:"remove_circle_outline",onClick:z[2]||(z[2]=h=>S(.9))}),p(le,{dense:"",flat:"",icon:"restore",onClick:F}),p(le,{dense:"",flat:"",icon:"rotate_left",onClick:z[3]||(z[3]=h=>k(-45))}),p(le,{dense:"",flat:"",icon:"rotate_right",onClick:z[4]||(z[4]=h=>k(45))})])])]),_:1},8,["modelValue"]))}};var ur=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));const dr={class:"row items-start q-gutter-sm"},cr=["onClick"],fr=["onClick"],vr={key:1,class:"absolute-full"},mr=["onClick"],pr={__name:"QPicture",props:{lazyRules:[Boolean,String],modelValue:String,clearable:Boolean,required:Boolean,outlined:Boolean,readonly:Boolean,loading:Boolean,sName:String,bName:String,limitNum:{type:Number,default:5},isLtXM:{type:Number,default:50}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,{humanStorageSize:r}=He,u=T(null),o=T(!1),a=T(!1),d=y(()=>[{name:"Authorization",value:Qt().token},{name:"lang",value:ne.locale}]),m=y(()=>`${Ot}oss/api/ossUploadRecord/batchUpload`),S=y(()=>t.isLtXM*1024*1024),k=j=>{const D=u.value.files.map(I=>I.__key);return j.filter(I=>!D.includes(`${I.name}${I.size}`))},F=y(()=>({flat:!0,batch:!0,multiple:!0,label:void 0,accept:"image/*","auto-upload":!0,color:"transparent",readonly:t.readonly,"max-files":t.limitNum,headers:d.value,"max-file-size":S.value})),C=T(""),z=j=>{const D={id:j.id,lastModified:+j.endTime,name:j.originalFileName,size:j.sizeBytes,__progressLabel:"100.00%",__status:"uploaded",resultPath:j.resultPath,__sizeLabel:j.sizeBytes<1024?`${j.sizeBytes}.0B`:r(j.sizeBytes)};D.__key=`${j.originalFileName}${j.sizeBytes}`,j.imageFlag==="1"&&(D.__img={src:j.imageSignedUrl}),u.value&&u.value.files.push(D)},h=()=>{if(t.modelValue===C.value)return;if(!t.modelValue){C.value="",u.value&&u.value.reset();return}o.value=!0;const j={pageSize:"-1",imageSignedUrlFlag:!0,idList:(t.modelValue||"").split(",")};Ie("/oss/api/ossUploadRecord/list",j,D=>{C.value=t.modelValue;for(const I of D.rows)z(I);o.value=!1},()=>{o.value=!1})};oe(se(t,"modelValue"),()=>{h()},{immediate:!0});const g=()=>({url:m.value,method:"POST",fieldName:"files",formFields:[{name:"serviceName",value:t.sName||"fmbb"},{name:"bussinessModule",value:t.bName||"fmbb"},{name:"publicRead",value:!1}]}),b=()=>{o.value=!0},B=()=>{o.value=!1},V=T(0),Q=j=>{if(j.xhr.response){const D=JSON.parse(j.xhr.response);rt[D.status](D)}},L=()=>{const j=u.value.files;C.value=j.map(D=>D.id).join(","),l("update:modelValue",C.value||"")},O=j=>{if(j.xhr.response){const D=JSON.parse(j.xhr.response);if(D.code!=="0"){for(const x of j.files)u.value.updateFileStatus(x,"failed",x.size),u.value.removeFile(x);rt[D.code](D);return}const I=j.files.length;for(let x=0;x<I;x++)j.files[x].id=D.data[x].id;L()}},N=(j,D)=>{D>-1&&j.__status!=="uploading"&&(V.value=D,a.value=!0)},M=j=>{o.value=!0,Mt({dicUrl:"/oss/api/ossUploadRecord/download",dicQuery:{path:j.resultPath},fileName:j.name,dicMethod:"get",done:()=>{o.value=!1}})},s=(j,D)=>{Ut({msg:`${ne.t("DelTips")}`},()=>{u.value.files.splice(D,1),u.value.removeFile(j),L()},()=>{})};return(j,D)=>(v(),P(ie,null,[p(Ve,K({hint:e.readonly?"":j.$t("PictureTips",[e.isLtXM]),label:void 0,loading:e.loading,readonly:e.readonly,borderless:"",class:"q-picture","lazy-rules":"ondemand","no-error-icon":""},j.$attrs),{control:i(()=>[p(Ft,K({ref_key:"uploadRef",ref:u,factory:g,filter:k},n(F),{onFailed:Q,onFinish:B,onStart:b,onUploaded:O}),{header:i(I=>[ue("div",dr,[(v(!0),P(ie,null,de(I.files,(x,W)=>(v(),P("div",{key:x.__key,class:"q-pictrue-card no-border rounded-borders shadow-1 overflow-hidden flex-center cursor-pointer",onClick:Je(c=>N(x,W),["stop"])},[x.__img?(v(),U(zt,{key:0,src:x.__img.src,loading:"lazy"},{default:i(()=>[x.__status==="failed"?(v(),P("div",{key:0,class:"uploader-error rounded-borders absolute-top-right",onClick:Je(N,["stop"])},[p(pe,{class:"cursor-pointer",color:"negative",name:"cloud_upload",onClick:I.upload},{default:i(()=>[p(_e,ke(je(j.$tooltipAttr)),{default:i(()=>[X(R(`${j.$t("UploadFailed")}`),1)]),_:1},16)]),_:2},1032,["onClick"])],8,fr)):Z("",!0),x.__status==="uploading"?(v(),P("div",vr,[p(ze,{showing:!0},{default:i(()=>[p(Nt,{value:x.__progress*100,color:"primary",size:"60px"},null,8,["value"])]),_:2},1024)])):(v(),P("div",{key:2,class:"q-pictrue-tip absolute-bottom flex justify-around items-center",onClick:Je(N,["stop"])},[p(pe,{class:"cursor-pointer",name:"cloud_download",onClick:c=>M(x)},null,8,["onClick"]),p(pe,{class:"cursor-pointer",name:"delete",onClick:c=>s(x,W)},null,8,["onClick"])],8,mr))]),_:2},1032,["src"])):Z("",!0)],8,cr))),128)),e.readonly?Z("",!0):(v(),U(le,{key:0,glossy:"",icon:"add",padding:"lg",style:{opacity:".8"},"text-color":"primary",onClick:I.pickFiles},{default:i(()=>[p(Lt),p(_e,ke(je(j.$tooltipAttr)),{default:i(()=>[X(R(`${j.$t("PleaseSelect")}${j.$t("Picture")}`),1)]),_:1},16)]),_:2},1032,["onClick"]))])]),list:i(()=>[]),_:1},16)]),_:1},16,["hint","loading","readonly"]),p(ze,{showing:o.value},{default:i(()=>[p(Ae,{color:"primary",size:"30px"})]),_:1},8,["showing"]),p(yt,{modelValue:a.value,"onUpdate:modelValue":D[0]||(D[0]=I=>a.value=I),imgList:(u.value||{}).files,index:V.value,keyWords:"__img.src"},null,8,["modelValue","imgList","index"])],64))}};var yr=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"}));const gr={__name:"QxFile",props:{lazyRules:[Boolean,String],modelValue:String,clearable:Boolean,required:Boolean,outlined:Boolean,readonly:Boolean,loading:Boolean,sName:String,bName:String,limitNum:{type:Number,default:5},isLtXM:{type:Number,default:50}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,{humanStorageSize:r}=He,u=be("BgToColor"),o=T(null),a=T(!1),d=T(!1),m=T(!1),S=y(()=>o.value?o.value.files.filter(c=>c.__img):[]),k=y(()=>({menu:!0,rightBtn:!1,column:[{label:`${ne.t("File")}${ne.t("Name")}`,field:"name",rowsNum:3},{label:`${ne.t("File")}${ne.t("Size")}`,field:"__sizeLabel",width:90},{label:`${ne.t("File")}${ne.t("Status")}`,field:"__status",slot:!0,width:90,align:"center"},{label:`${ne.t("Thumbnail")}`,field:"picture",slot:!0,width:90,align:"center"}]})),F=y(()=>[{name:"Authorization",value:Qt().token},{name:"lang",value:ne.locale}]),C=y(()=>`${Ot}oss/api/ossUploadRecord/batchUpload`),z=y(()=>t.isLtXM*1024*1024),h=c=>{const _=o.value.files.map(w=>w.__key);return c.filter(w=>!_.includes(`${w.name}${w.size}`))},g=y(()=>({flat:!0,batch:!0,multiple:!0,label:void 0,"auto-upload":!0,color:"transparent",readonly:t.readonly,"max-files":t.limitNum,headers:F.value,"max-file-size":z.value})),b=T(""),B=c=>{const _={id:c.id,lastModified:+c.endTime,name:c.originalFileName,size:c.sizeBytes,__progressLabel:"100.00%",__status:"uploaded",resultPath:c.resultPath,__sizeLabel:c.sizeBytes<1024?`${c.sizeBytes}.0B`:r(c.sizeBytes)};_.__key=`${c.originalFileName}${c.sizeBytes}`,c.imageFlag==="1"&&(_.__img={src:c.imageSignedUrl}),o.value&&o.value.files.push(_)},V=()=>{if(t.modelValue===b.value)return;if(!t.modelValue){b.value="",o.value&&o.value.reset();return}a.value=!0;const c={pageSize:"-1",imageSignedUrlFlag:!0,idList:(t.modelValue||"").split(",")};Ie("/oss/api/ossUploadRecord/list",c,_=>{b.value=t.modelValue;for(const w of _.rows)B(w);a.value=!1},()=>{a.value=!1})};oe(se(t,"modelValue"),()=>V(),{immediate:!0});const Q=()=>({url:C.value,method:"POST",fieldName:"files",formFields:[{name:"serviceName",value:t.sName||"fmbb"},{name:"bussinessModule",value:t.bName||"fmbb"},{name:"publicRead",value:!1}]}),L=()=>{a.value=!0},O=()=>{a.value=!1,l("onSucess",o.value.files[0])},N=T(0),M=c=>{if(c.xhr.response){const _=JSON.parse(c.xhr.response);rt[_.status](_)}},s=()=>{const c=o.value.files;b.value=c.map(_=>_.id).join(","),l("update:modelValue",b.value||"")},j=c=>{if(c.xhr.response){const _=JSON.parse(c.xhr.response);if(_.code!=="0"){for(const G of c.files)o.value.updateFileStatus(G,"failed",G.size),o.value.removeFile(G);rt[_.code](_);return}const w=c.files.length;for(let G=0;G<w;G++)c.files[G].id=_.data[G].id;s()}},D=()=>{d.value=!0},I=(c,_)=>{_>-1&&c.__status!=="uploading"&&(N.value=_,m.value=!0)},x=c=>{a.value=!0,Mt({dicUrl:"/oss/api/ossUploadRecord/download",dicQuery:{path:c.resultPath},fileName:c.name,dicMethod:"get",done:()=>{a.value=!1}})},W=(c,_)=>{Ut({msg:`${ne.t("DelTips")}`},()=>{o.value.files.splice(_,1),o.value.removeFile(c),s()},()=>{})};return(c,_)=>(v(),P(ie,null,[p(Ve,K({hint:e.readonly?"":c.$t("FileTips",[e.isLtXM]),label:void 0,loading:e.loading,readonly:e.readonly,borderless:"",class:"q-picture","lazy-rules":"ondemand","no-error-icon":""},c.$attrs),{control:i(()=>[p(Ft,K({ref_key:"uploadRef",ref:o,factory:Q,filter:h},n(g),{onFailed:M,onFinish:O,onStart:L,onUploaded:j}),{header:i(w=>[p(_l,null,{default:i(()=>[p(le,{label:c.$t("ToView"),loading:a.value,"text-color":n(u)("primary"),color:"primary",icon:"preview",onClick:D},{default:i(()=>[w.files.length?(v(),U($l,{key:0,class:fe(`text-${n(u)("info")}`),color:"info",floating:""},{default:i(()=>[X(R(w.files.length),1)]),_:2},1032,["class"])):Z("",!0)]),_:2},1032,["label","loading","text-color"]),p(Ee,{vertical:""}),p(le,{disable:e.readonly,label:c.$t("Upload"),loading:a.value,"text-color":n(u)("primary"),color:"primary",icon:"cloud_upload",onClick:w.pickFiles},{default:i(()=>[p(Lt)]),_:2},1032,["disable","label","loading","text-color","onClick"])]),_:2},1024)]),list:i(()=>[]),_:1},16)]),_:1},16,["hint","loading","readonly"]),p(Ht,{modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=w=>d.value=w),header:`${c.$t("File")}${c.$t("List")}`,menuBtn:!1,width:"50%"},{default:i(()=>[p(Yt,{data:(o.value||{}).files,option:n(k)},{__status:i(({row:w})=>[p(Nt,{value:(w.__progress||1)*100,color:"primary","font-size":"12px","show-value":"",size:"60px"},{default:i(()=>[X(R(w.__progressLabel),1)]),_:2},1032,["value"])]),picture:i(({row:w,index:G})=>[w.__img?(v(),U(zt,{key:0,src:w.__img.src,class:"rounded-borders cursor-pointer",loading:"lazy",sizes:"60px",onClick:Je(ve=>I(w,G),["stop"])},null,8,["src","onClick"])):Z("",!0)]),menu:i(({row:w,index:G})=>[p(le,{color:"primary",flat:"",icon:"cloud_download",round:"",onClick:ve=>x(w)},null,8,["onClick"]),e.readonly?Z("",!0):(v(),U(le,{key:0,color:"negative",flat:"",icon:"delete",round:"",onClick:ve=>W(w,G)},null,8,["onClick"]))]),_:1},8,["data","option"])]),_:1},8,["modelValue","header"]),p(yt,{modelValue:m.value,"onUpdate:modelValue":_[1]||(_[1]=w=>m.value=w),imgList:n(S),index:N.value,keyWords:"__img.src"},null,8,["modelValue","imgList","index"])],64))}};var hr=Object.freeze(Object.defineProperty({__proto__:null,default:gr},Symbol.toStringTag,{value:"Module"}));const Ct={"./Global/QModal.vue":jl,"./Global/QxForm.vue":Al,"./Global/QxPage.vue":Dl,"./Global/QxTable.vue":ya,"./Global/QxTree.vue":xa,"./Global/Form/QGroup.vue":$a,"./Global/Form/QMonth.vue":Ba,"./Global/Form/QNumber.vue":ja,"./Global/Form/QSelectTree.vue":La,"./Global/Form/QYear.vue":Ra,"./Global/Form/QxDate.vue":Ia,"./Global/Form/QxEditor.vue":Ka,"./Global/Form/QxSelect.vue":Ja,"./Global/Form/QxTime.vue":lr,"./Global/Tools/QCharts.vue":rr,"./Global/Tools/QPicture.vue":yr,"./Global/Tools/QPreview.vue":ur,"./Global/Tools/QxFile.vue":hr,"./Global/Tools/QxTooltip.vue":Gl},wr=e=>{Object.keys(Ct).forEach(l=>{const t=Ct[l],r=t.default||t,u=r.name||r.__name;e.component(u,r)})};export{Dt as _,wr as l};
